{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../public/asset/public/roderic/webpack/dotenv.js","webpack:///external \"express\"","webpack:///../app/server.config.js\"","webpack:///external \"inspc/logt\"","webpack:///../app/public.config.js","webpack:///external \"react\"","webpack:///external \"jsonwebtoken\"","webpack:///../public/asset/public/roderic/libs/jwtCookie.js","webpack:///external \"redux\"","webpack:///../app/public.config.js\"","webpack:///external \"lodash/isArray\"","webpack:///../app/server.config.js","webpack:///config.js\"","webpack:///../public/asset/public/inspc/logn.js","webpack:///external \"path\"","webpack:///external \"react-router\"","webpack:///../public/asset/public/roderic/libs/transport.js","webpack:///external \"md5\"","webpack:///../public/asset/public/roderic/webpack/delay.js","webpack:///external \"react-router-redux\"","webpack:///../public/asset/public/roderic/libs/configureStore.js","webpack:///external \"prop-types\"","webpack:///external \"fs\"","webpack:///external \"lodash/isObject\"","webpack:///external \"@stopsopa/knex-abstract\"","webpack:///../app/front/routes.js","webpack:///../app/front/pages/ipromise/Ipromise.js","webpack:///external \"serialize-javascript\"","webpack:///external \"compression\"","webpack:///external \"body-parser\"","webpack:///external \"inspc\"","webpack:///external \"react-router-dom\"","webpack:///../public/asset/public/inspc/logw.js","webpack:///external \"html\"","webpack:///external \"react-display-name\"","webpack:///external \"urijs\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-promise\"","webpack:///external \"redux-thunk\"","webpack:///../public/asset/public/roderic/libs/history.js","webpack:///external \"history/createBrowserHistory\"","webpack:///external \"react-dom/server\"","webpack:///external \"source-map-support\"","webpack:///external \"lodash/template\"","webpack:///external \"http-proxy-middleware\"","webpack:///../public/asset/public/roderic/webpack/htmlcache.js","webpack:///../app/controllers/api/userprovider.js","webpack:///external \"lodash/trim\"","webpack:///external \"react-redux\"","webpack:///../app/index.server.js","webpack:///../public/asset/public/inspc/logi.js","webpack:///../public/asset/public/inspc/logt.js","webpack:///external \"@babel/polyfill\"","webpack:///external \"@stopsopa/dotenv-up\"","webpack:///../public/asset/public/roderic/libs/ajax-fetch.js","webpack:///external \"whatwg-fetch\"","webpack:///external \"colors\"","webpack:///(webpack)/buildin/module.js","webpack:///external \"cookies\"","webpack:///../public/asset/public/roderic/libs/express-extend-res.js","webpack:///external \"request-ip\"","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///external \"polyfill-service-express\"","webpack:///external \"polyfill-service\"","webpack:///../public/asset/public/roderic/libs/redirectionsMiddleware.js","webpack:///../public/asset/public/roderic/libs/jwtExtractPayload.js","webpack:///../public/asset/public/roderic/libs/jsonFilesCacheMiddleware.js","webpack:///../public/asset/public/roderic/libs/extractRoutesMiddleware.js","webpack:///../public/asset/public/roderic/libs/checkAcceptHeaderMiddleware.js","webpack:///../public/asset/public/roderic/libs/fileLazyLoader.js","webpack:///../app/controllers/api/jwttokenprovider.js","webpack:///../app/front/controllers/page.js","webpack:///../app/front/controllers/main.js","webpack:///../app/controllers/api/index.js","webpack:///../app/controllers/api/admin/index.js","webpack:///../app/front/controllers/index.js","webpack:///../app/controllers/index.js","webpack:///../app/controllers/api/jwttokendiff.js","webpack:///../app/controllers/api/jwttokenrefresh.js","webpack:///../app/front/_redux/reducers/page.js","webpack:///../app/front/_redux/actions/types.js","webpack:///../app/front/_redux/reducers/main.js","webpack:///../app/front/_redux/reducers/index.js","webpack:///../app/front/components/Root.js","webpack:///../app/front/components/RootServer.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isObject","require","isArray","node","global","toString","process","envcache","env","concat","tool","assign","arguments","length","undefined","has","webload","params","ENV_SECURE","preprocess","dotenvfile","targetjsonfile","console","log","parse","ENV_ORIGIN","NODE_ENV","max","keys","reduce","acc","val","map","k","repeat","fs","eval","writeFileSync","JSON","stringify","existsSync","file","secure","dotenv","content","readFileSync","split","e","indexOf","substring","join","isProd","window","cache","fake","delay","jwt","remote","jwttokendiff","jwttokenrefresh","secureEndpointsPattern","postToGetReloadShortcut","loginHiddenInput","cookie_name","htmlParams","gaid","php_proxy","prefix","publicConfig","serverConfig","cookie_expire_after","Cookies","req","res","cookies","headers","set","expires","Date","setTime","getTime","httpOnly","this","del","msg","addEventListener","setTimeout","document","write","alert","config","controllers","knex","users","username","password","roles","jwt_secret","jwt_expire","parseInt","checkAcceptHeader","schema","host","port","public","stdout","__stack","tmp","orig","Error","prepareStackTrace","_","stack","err","captureStackTrace","__line","rpad","_typeof","String","slice","push","getFileName","getLineNumber","toISOString","replace","nat","emmit","manualMode","native","Array","forEach","args","apply","start","flush","data","json","a","nn","Number","isInteger","ll","obj","type","isNaN","constructor","count","dump","limit","inner","index","isOb","fn","context","each","v","pop","jwtToken","modeNode","setJwtToken","token","ndur","fetchData","path","_opt","promise","opt","_objectWithoutProperties","_getUrl","forceRelative","sendJWTToken","test","match","getUrl","_path","X-jwt","_len","rest","_key","real","server","_toConsumableArray","fetch","credentials","always","then","ok","Promise","resolve","reject","catch","method","toUpperCase","body","status","statusText","delayPromise","fetchJson","_objectSpread","Accept","Content-type","FormData","_len2","_key2","text","dd","str","times","decodeURIComponent","ee","encodeURIComponent","time","wrapDispatchWithMiddlewares","store","middlewares","middleware","dispatch","triggerMultiple","next","action","getStore","configureStore","preloadedState","reducers","_opt$createLoggerConf","createLoggerConfig","_opt$composeEnhancers","composeEnhancersConfig","thunk","promisify","composeEnhancers","compose","ls","localStorage","getItem","createLogger","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","routerMiddleware","history","createStore","applyMiddleware","buildUrls","routes","route","nested","extract","url","rootTrigger","root","list","notRoot","found","find","matchPath","component","trigger","cascadeMeta","routesObj","parentMeta","meta","_opt$logFlag","logFlag","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","_Promise$all$then","urlParts","getParameters","routesList","firstRoute","wrap","_context","prev","URI","parseQuery","abrupt","all","foundComponent","componentName","getDisplayName","isFetchData","tlog","reason","message","exception","stop","_x","exact","Component","external_react_default","createElement","history_createBrowserHistory__WEBPACK_IMPORTED_MODULE_0__","history_createBrowserHistory__WEBPACK_IMPORTED_MODULE_0___default","createHistory","reg","now","inFile","accessSync","constants","R_OK","W_OK","__webpack_exports__","router","Router","use","user","error","role","model","queryOne","sent","enabled","t0","jsonError","jsonNoCache","_x2","path__WEBPACK_IMPORTED_MODULE_1__","path__WEBPACK_IMPORTED_MODULE_1___default","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","serialize_javascript__WEBPACK_IMPORTED_MODULE_3__","serialize_javascript__WEBPACK_IMPORTED_MODULE_3___default","express__WEBPACK_IMPORTED_MODULE_4__","express__WEBPACK_IMPORTED_MODULE_4___default","md5__WEBPACK_IMPORTED_MODULE_5__","md5__WEBPACK_IMPORTED_MODULE_5___default","jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__","jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default","compression__WEBPACK_IMPORTED_MODULE_7__","compression__WEBPACK_IMPORTED_MODULE_7___default","body_parser__WEBPACK_IMPORTED_MODULE_8__","body_parser__WEBPACK_IMPORTED_MODULE_8___default","_react_config__WEBPACK_IMPORTED_MODULE_9__","_react_config__WEBPACK_IMPORTED_MODULE_9___default","public_config__WEBPACK_IMPORTED_MODULE_10__","public_config__WEBPACK_IMPORTED_MODULE_10___default","server_config__WEBPACK_IMPORTED_MODULE_11__","server_config__WEBPACK_IMPORTED_MODULE_11___default","html__WEBPACK_IMPORTED_MODULE_12__","html__WEBPACK_IMPORTED_MODULE_12___default","roderic_libs_configureStore__WEBPACK_IMPORTED_MODULE_13__","react_dom_server__WEBPACK_IMPORTED_MODULE_15__","source_map_support__WEBPACK_IMPORTED_MODULE_16__","source_map_support__WEBPACK_IMPORTED_MODULE_16___default","lodash_template__WEBPACK_IMPORTED_MODULE_17__","lodash_template__WEBPACK_IMPORTED_MODULE_17___default","http_proxy_middleware__WEBPACK_IMPORTED_MODULE_18__","http_proxy_middleware__WEBPACK_IMPORTED_MODULE_18___default","roderic_webpack_htmlcache__WEBPACK_IMPORTED_MODULE_19__","roderic_webpack_htmlcache__WEBPACK_IMPORTED_MODULE_19___default","roderic_libs_jwtCookie__WEBPACK_IMPORTED_MODULE_20__","roderic_libs_jwtCookie__WEBPACK_IMPORTED_MODULE_20___default","transport__WEBPACK_IMPORTED_MODULE_21__","inspc_logt__WEBPACK_IMPORTED_MODULE_22__","inspc_logt__WEBPACK_IMPORTED_MODULE_22___default","jwt_secret_md5","md5","configServer","sourceMapSupport","install","configWebpack","on","code","errno","red","app","express","requestIp","mw","polyfills","jwtExtractPayload","jsonFilesCacheMiddleware","createServer","verbose","listAllPolyfills","end","compression","filter","static","web","maxAge","setHeaders","setHeader","redirections","cookieJWTTwoDotsToken","jwtCookie","payload","diff","exp","diffInSec","media","proxy","changeOrigin","pathRewrite","parts","configPublic","bodyParser","urlencoded","extended","jsonApi","post","regex","extractRoutesMiddleware","twoDotsFormEncodedJWTTokenTransportKey","userProviderEndpoint","email","jwtTokenProvider","fetchDataTransport","fetchRes","cookie","toLowerCase","twoDotsJWTToken","sign","expiresIn","default","init","RootServer","htmlLazyLoaderTemplate","timejs","template","verify","secured","mainRoute","htmlFromReact","renderToString","location","redirect","scriptWithPayload","serialize","html","getState","space","prettyPrint","indent_size","send","source","shift","listen","green","bgBlue","yellow","x","colorscache","util","depth","colors","compact","inspect","old","webpackPolyfill","deprecate","paths","children","Cache-Control","Pragma","Expires","toUTCString","errstring","notFound","accessDenied","ignorePrefixes","ignorePrefixesLength","redirectionsLength","newPath","buildPath","Buffer","from","atob","trim","defOpt","timeout","globOpt","setup","dir","param","created","getDataFromJsonFile","handle","methods","entries","_ref2","_slicedToArray","_ref3","regexp","_params","_router","force","query","_accept","refreshEverySec","postProccess","statusCode","page","main","api","userprovider","secret","expire","hash","decoded","decode","padEnd","rawJwt","raw","iat","newCookieJWTTwoDotsToken","combineReducers","state","slug","reducers_getMain","reducers_getMainSection","reducers_getPage","reducers_getSlug","copy","_defineProperty","section","routerReducer","getMain","fromMain","getMainSection","getPage","fromPage","getSlug","Root","Fragment","external_react_router_dom_","_extends","external_react_redux_","external_react_router_","components_Root","propTypes","PropTypes","isRequired","string"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 49);\n","\nconst isObject  = require('lodash/isObject');\n\nconst isArray   = require('lodash/isArray');\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nlet envcache = false;\n\n/**\n * Private method to get environment variables depending on detected environment\n * @returns {boolean}\n */\nconst get = name => {\n\n    let env = envcache;\n\n    if (node) {\n\n        if ( ! envcache) {\n\n            envcache = process.env || {};\n\n            // from now on instead WEBPACK_MODE use NODE_ENV\n            // from now on instead WEBPACK_MODE use NODE_ENV\n            // from now on instead WEBPACK_MODE use NODE_ENV\n\n            // if (envcache['NODE_ ENV'] === 'development') {\n            //\n            //     envcache.WEBPACK_ MODE = 'dev';\n            // }\n            // else {\n            //\n            //     envcache.WEBPACK_ MODE = 'prod';\n            // }\n        }\n\n        env = envcache;\n    }\n    else if (env === false) {\n\n        throw `roderic/webpack/dotenv.js: to use roderic/webpack/dotenv.js in browser mode first run dotenv.webload(.env) in webpack web entrypoint. key: '${name}'`;\n    }\n\n    return env;\n}\n\n/**\n * General purpose tool to get any envcacheironement variable\n * @param name\n * @param args you can specify default value if there is no ${name} environment variable\n */\nconst tool = (name, ...args) => {\n\n    let env = get(name);\n\n    if ( ! name ) { // if no name given then return all, but copy first\n\n        return Object.assign({}, env);\n    }\n\n    if (typeof env[name] === 'undefined') {\n\n        if (args.length > 0) {\n\n            return args[0];\n        }\n\n        throw `roderic/webpack/dotenv.js: there is no environment variable '${name}'`;\n    }\n\n    return env[name];\n};\n\ntool.has = name => {\n\n    let env = get(name);\n\n    if (typeof env[name] === 'undefined') {\n\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * To execute in *.entry.js\n * @param file\n */\ntool.webload = params => {\n\n    if ( ! isObject(params) ) {\n\n        throw `roderic/webpack/dotenv.js:webload: params must be an object`\n    }\n\n    if ( isArray(params) ) {\n\n        throw `roderic/webpack/dotenv.js:webload: params can't be an array`;\n    }\n\n    // console.log('params.ENV_SECURE', params.ENV_SECURE, JSON.stringify(params.ENV_SECURE));\n\n    if ( ! node ) {\n\n        if ( typeof params.ENV_SECURE === 'undefined' ) {\n\n            throw `roderic/webpack/dotenv.js:webload: params should have ENV_SECURE value`;\n        }\n\n        if ( params.ENV_SECURE !== 'true' ) {\n\n            throw `roderic/webpack/dotenv.js:webload: ENV_SECURE should be 'true' in web mode`;\n        }\n    }\n\n    envcache = params;\n};\n\n/**\n * To execute in preprocessor.js\n * @param file\n */\n\ntool.preprocess = (dotenvfile, targetjsonfile) => {\n\n    if ( ! node ) {\n\n        throw `roderic/webpack/dotenv.js:preprocess: don't call this method in web mode`;\n    }\n\n    console.log(\"\\n\");\n\n    const env = tool.parse(dotenvfile);\n\n    env.ENV_ORIGIN      = 'preprocessor';\n\n    env.NODE_ENV        = process.env.NODE_ENV || 'development';\n\n    console.log(\"Web exposed environment variables: \\n\\n\");\n\n    const max = Object.keys(env).reduce((acc, val) => {\n\n        const l = val.length;\n\n        if (l > acc) {\n\n            return l;\n        }\n\n        return acc;\n    }, 0);\n\n    Object.keys(env).map(key => {\n\n        const l = key.length;\n\n        let k = key;\n\n        if (l < max) {\n\n            k += ' '.repeat(max - l);\n        }\n\n        console.log(k, ':', env[key])\n    });\n\n    console.log(\"\\n\");\n\n    const fs        = eval('require')('fs');\n\n    fs.writeFileSync(targetjsonfile, JSON.stringify(env, null, 4));\n\n    if (fs.existsSync(targetjsonfile)) {\n\n        console.log(`File '${targetjsonfile}' successfully saved...`);\n    }\n    else {\n\n        throw `Preprocessor: Can't save '${targetjsonfile}'...`;\n    }\n\n    console.log(\"\\n\");\n}\n\ntool.parse = (file, secure = true) => {\n\n    if ( ! node ) {\n\n        throw `roderic/webpack/dotenv.js:parse: don't call this method in web mode`;\n    }\n\n    const fs        = eval('require')('fs');\n\n    const dotenv    = eval('require')('dotenv');\n\n    if ( ! fs.existsSync(file) ) {\n\n        throw `File '${file}' doesn't exist`;\n    }\n\n    let content = fs.readFileSync(file).toString();\n\n    content = content.split(\"\\n\").map(e => {\n\n        if (e.indexOf('export ') === 0) {\n\n            e = e.substring(7);\n        }\n\n        return e;\n\n    }).join(\"\\n\");\n\n    content = dotenv.parse(content);\n\n    content.ENV_SECURE = secure ? 'true' : 'false';\n\n    return Object.keys(content).reduce((acc, key) => {\n\n        if ( ! secure || key.indexOf('PROTECTED_') !== 0) {\n\n            acc[key] = content[key];\n        }\n\n        return acc;\n\n    }, {});\n}\n\ntool.isProd = () => tool('NODE_ENV') === 'production';\n\n(function () {\n\n    if (typeof window !== 'undefined') {\n\n        window.env = tool;\n    }\n\n}());\n\nmodule.exports = tool;\n\nif ( ! node ) {\n\n    window.env = tool;\n}","module.exports = require(\"express\");","module.exports = require(\"./../../app/server.config.js\");","module.exports = require(\"inspc/logt\");","/**\n * WARNING\n * WARNING\n * WARNING\n * WARNING\n * WARNING: be carefull with exposing here vulnerable data, because this file is sended to browser\n * WARNING\n * WARNING\n * WARNING\n * WARNING: ... and don't remove this message, please...\n */\n\n//\n// /**\n//  * I'm readding parameters straight from symfony config, because it is always good idea\n//  * to avoid duplications of parameters across project\n//  */\n// let sf_parameters;\n// try {\n//     sf_parameters     = require('../react/preprocessor/sf_parameters');\n// }\n// catch (e) {\n//     throw `\\n\\n\\n             Error: Can't load sf_parameters, first run preprocessor\\n\\n\\n     Native error: ${e}\\n\\n\\n`;\n// }\n\nconst env = (function () {\n\n    const node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\n    let cache = false;\n\n    if (node) {\n        cache = process.env;\n    }\n    else {\n        cache = require('./preprocessor/dotenv.json');\n    }\n\n    return (name, ...rest) => {\n\n        if (!cache[name]) {\n\n            if (rest.length) {\n\n                return rest[0];\n            }\n\n            console.log(JSON.stringify(cache, null, 4))\n\n            throw `public.config.js: Environement variable '${name}' doesn't exist`;\n        }\n\n        return cache[name];\n    }\n}());\n\nmodule.exports = {\n    fake: true, // to enable transport-fake.js\n    delay: false, //1300\n    // delay: 1000, //1300\n    jwt: {\n        remote: { // all rest is defined in server.config.js\n            jwttokendiff    : '/api/jwttokendiff',\n            jwttokenrefresh : '/api/jwttokenrefresh',\n        },\n        secureEndpointsPattern: /^\\/admin/,\n        postToGetReloadShortcut: true,\n        loginHiddenInput: {\n            name: '_authenticate',\n            value: 'authenticate'\n        },\n\n        // WARNING: setup the same value also in php/app/config/parameters.yml -> cookie_name\n        cookie_name: env('JWT_COOKIE_NAME'), // use for localstorage and cookies\n    },\n    htmlParams: {\n        // gaid: 'UA-xxxxxxxx-xx'\n        gaid: env('GA_TRACKING_ID', false),\n    },\n    php_proxy: {\n        prefix  : /(\\/endpoint|\\/media)([\\/\\?].*)?$/,\n    },\n    // jsonApi: { // fake api jsonFilesCacheMiddleware.js &&\n    //     inNodeFetchDirectlyFromFiles: true,\n    //     dir: (function () {\n    //\n    //         const node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n    //\n    //         if (node) {\n    //\n    //             const path = eval('require')('path');\n    //\n    //             return path.resolve(__dirname, 'data');\n    //         }\n    //\n    //         log('for jsonFilesCacheMiddleware: no data directory for jsonApi');\n    //     }()),\n    //     timeout: 60 // sec\n    // },\n}\n","module.exports = require(\"react\");","module.exports = require(\"jsonwebtoken\");","/**\n * Script to use only on server, never import it to browser script\n */\n\nvar publicConfig = require('public.config');\n\nvar serverConfig = require('server.config');\n\nif (!publicConfig.jwt.cookie_name) {\n\n    throw \"publicConfig.jwt.cookie_name is not specified\";\n}\n\nif (!serverConfig.jwt.cookie_expire_after) {\n\n    throw \"serverConfig.jwt.cookie_expire_after is not specified\";\n}\n\nif (serverConfig.jwt.cookie_expire_after < 1) {\n\n    throw \"serverConfig.jwt.cookie_expire_after is too small\";\n}\n\nvar Cookies = require('cookies');\n\nmodule.exports = function (req, res) {\n\n    var cookies = new Cookies(req, res);\n\n    return {\n        get: function () {\n\n            return req.headers['x-jwt'] || cookies.get(publicConfig.jwt.cookie_name)\n        },\n        /**\n         * @param value - string value\n         * @param expires - milisecond (+ or - if you want to delete) https://github.com/pillarjs/cookies#cookiesget-name--options--\n         * @returns {tool}\n         */\n        set: function (value) {\n\n            // console.log(`\\n\\nset cookie...\\n\\n`);\n\n            cookies.set(publicConfig.jwt.cookie_name, value, {\n                expires: (function (k) {\n                    k.setTime(k.getTime() + (serverConfig.jwt.cookie_expire_after * 1000))\n                    return k;\n                }(new Date())),\n                httpOnly: false\n            });\n\n            return this;\n        },\n        del: function () {\n            return this.set('delete-this-cookie', - (1 * 60 * 60 * 1000) ) // -1 day\n        }\n    }\n};\n\n","module.exports = require(\"redux\");","module.exports = require(\"./../../app/public.config.js\");","module.exports = require(\"lodash/isArray\");","/**\n * WARNING\n * WARNING\n * WARNING\n * WARNING\n * WARNING: these data shouldn't be NEVER imported/required in files that's gonna be exposed in browser\n * WARNING ... only in server scripts\n * WARNING\n * WARNING\n * WARNING: ... and don't remove this message, please...\n */\n\nconst path = require('path');\n\n// const mysql = require('./models/mysql');\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nif ( ! node ) {\n\n    const msg = `\\n\\n\\nserver.config.js is included in web bundle - that's serious security issue\\n\\n\\n`;\n\n    window.addEventListener('DOMContentLoaded', () => setTimeout(() => document.write(msg), 500))\n\n    alert(msg);\n\n    throw msg;\n}\n\nconst env = name => {\n    if (!process.env[name]) {\n\n        throw `server.config.js: Environement variable '${name}' doesn't exist`;\n    }\n\n    return process.env[name];\n}\n\n// const isProd = env('NODE_ENV') === 'production';\n\n/**\n * Leave above too please, that's for secirity ^^^^\n */\n\n// let sf_parameters;\n// try {\n//     sf_parameters     = require('../react/preprocessor/sf_parameters');\n// }\n// catch (e) {\n//     throw `\\n\\n\\n             Error: Can't load sf_parameters, first run preprocessor\\n\\n\\n     Native error: ${e}\\n\\n\\n`;\n// }\n\nconst config = {\n    controllers: true,\n    knex: false,\n    // knex: {\n    //     def: 'mysql',\n    //     // sqlite: {\n    //     //     client: 'sqlite3',\n    //     //     connection: {\n    //     //         filename: path.resolve(__dirname, '..', 'db.sqlite')\n    //     //     },\n    //     //     debug: !isProd,\n    //     //     asyncStackTraces: !isProd, // https://knexjs.org/#Installation-asyncStackTraces\n    //     //     useNullAsDefault: true,\n    //     // }\n    //     mysql: {\n    //         // CREATE DATABASE IF NOT EXISTS `dashboard` /*!40100 DEFAULT CHARACTER SET utf8 */\n    //         // GRANT ALL PRIVILEGES ON dashboard.* To 'dashboard'@'%' IDENTIFIED BY 'pass';\n    //         // SHOW GRANTS FOR 'dashboard';\n    //         // DROP USER 'dashboard'\n    //         connection: {\n    //             host        : env('PROTECTED_MYSQL_HOST'),\n    //             port        : env('PROTECTED_MYSQL_PORT'),\n    //             user        : env('PROTECTED_MYSQL_USER'),\n    //             password    : env('PROTECTED_MYSQL_PASS'),\n    //             database    : env('PROTECTED_MYSQL_DB')\n    //         },\n    //         models: mysql,\n    //     },\n    //     test: {\n    //         // CREATE DATABASE IF NOT EXISTS `dashboard` /*!40100 DEFAULT CHARACTER SET utf8 */\n    //         // GRANT ALL PRIVILEGES ON dashboard.* To 'dashboard'@'%' IDENTIFIED BY 'pass';\n    //         // SHOW GRANTS FOR 'dashboard';\n    //         // DROP USER 'dashboard'\n    //         client: 'mysql',\n    //         connection: {\n    //             host : env('PROTECTED_TEST_MYSQL_HOST'),\n    //             user : env('PROTECTED_TEST_MYSQL_USER'),\n    //             password : env('PROTECTED_TEST_MYSQL_PASS'),\n    //             database : env('PROTECTED_TEST_MYSQL_DB')\n    //         }\n    //     },\n    // },\n    jwt: {\n        // remote: {\n        //     userProviderEndpoint    : '/api/userprovider',\n        //     jwtTokenProvider        : '/api/jwttokenprovider',\n        //     // userProviderEndpoint    : '/endpoint/userprovider',\n        //     // jwtTokenProvider        : '/endpoint/jwttokenprovider',\n        //     // jwttokendiff: ---> is defined in server.public.js\n        // },\n        users: [\n            {\n                username: 'admin',\n                password: 'password',\n                roles: [\n                    'admin'\n                ]\n            },\n            {\n                username: 'test',\n                password: 'password'\n            }\n        ],\n        // WARNING: setup the same value also in php/app/config/parameters.yml -> jwt_secret\n        jwt_secret: env('PROTECTED_JWT_SECRET'),\n\n        // https://github.com/auth0/node-jsonwebtoken#jwtverifytoken-secretorpublickey-options-callback\n        // param 'maxAge'\n        jwt_expire: parseInt(env('PROTECTED_JWT_EXPIRE'), 10), // (seconds) change also public.config.js -> jwt.cookie_expire_after\n\n        // cookie_expire_after: 22 * 60 * 60 * 1000, // 22 hours // change also server.config.js -> jwt.jwt_expire\n        cookie_expire_after: parseInt(env('PROTECTED_JWT_EXPIRE'), 10) + (12 * 60 * 60), // + 12h\n    },\n    checkAcceptHeader: true,\n    php_proxy: {\n        //prefix - WARNING: don't declare it here, declare it in public.config.js because this parameter is used in transport.js\n        schema  : env('NODE_SSR_PROTOCOL'),\n        host    : env('NODE_SSR_HOST'),\n        port    : parseInt(env('NODE_SSR_PORT'), 10) // WARNING; setup this also in docker/docker-compose.yml -> services.web.ports\n        // the same endpoint:\n        //   php    : http://localhost:8280/json\n        //   node   : http://localhost:1025/endpoint/json\n    },\n\n    public: require('./public.config'),\n\n    // redirections: require('./redirections')\n}\n\nif (require.main === module) {\n\n    process.stdout.write(JSON.stringify(config, null, '    '));\n}\nelse {\n\n    module.exports = config;\n}\n","module.exports = require(\"./../config.js\");","/**\n * @author Szymon Dziaowski\n * @license MIT License (c) copyright 2017-present original author or authors\n * @homepage https://github.com/stopsopa/roderic\n */\n'use strict';\n\n// -- test --- vvv\n\n// const log = require('./logn');\n//\n// (function () {\n//\n//     (function () {\n//\n//         console.log('------------ 1');\n//\n//         log('one')('two')('three');\n//\n//         console.log('------------ 2');\n//\n//         log('-test-')('+test+')('testddd')('next');\n//\n//         console.log('------------ 3');\n//\n//         log.stack(2)('-test-')('+test+')('testddd')('next');\n//\n//         console.log('------------ 4');\n//\n//         log.stack(0).log('stack 0', 'two');\n//\n//         log.stack(1).log('stack 1', 'two');\n//\n//         log.stack(2).log('stack 2', 'two');\n//\n//         console.log('------------ stack default 2');\n//\n//         log.stack(0)('-test-')('+test+')('testddd')('next');\n//\n//         console.log('------------ json');\n//\n//         log.json({one: \"two\", three: [5, 'eight']})\n//\n//         log.stack(2).json({one: \"two\", three: [5, 'eight']})({one: \"two\", three: [5, 'eight']})\n//\n//         console.log('------------ dump');\n//\n//         // only one arg\n//         log.dump({one: \"two\", three: [5, 'eight']}, 2 /* show levels (must be int > 0) */);\n//\n//         console.log('------------ stack dump ');\n//\n//         // in second cascade call 'level' is not necessary (stil .dump() accept only one ar\n//         log.stack(2).dump({one: \"two\", three: [5, 'eight']}, 2)({one: \"two\", three: [5, 'eight']})\n//\n//\n//     }());\n//\n// }());\n\n// -- test --- ^^^\n\n\n\n\n/**\n * log(arg1, arg2, ...)(arg1, arg2, ...)  - line and args\n * log.json(arg1, arg2, ...)(arg1, arg2, ...) - line and args as human readdable json\n * log.dump(arg1, arg2, ...)(arg1, arg2, ...) - line and args (exact description of types)\n *\n * log.stack(5)(arg1, arg2, ...)(arg1, arg2, ...)  - line and args\n * log.stack(5).json(arg1, arg2, ...)(arg1, arg2, ...) - line and args as human readdable json\n * log.stack(5).dump(arg1, arg2, ...)(arg1, arg2, ...) - line and args (exact description of types)\n *\n * and...\n * var tmp = log.stack(4)('test')\n *\n * tmp('test2')\n *\n * gives:\n * /opt/spark_dev/crawler.js:47\n * test\n * /opt/spark_dev/crawler.js:47\n * test2\n *\n * buffering (returning output as a string)\n *\n\n log.start();\n\n log.dump('test1');\n\n log('test2');\n\n // true or false to additionally flush data to screen after return (def false)\n const tmp = log.get(true);\n */\n\n\n// web version\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nif ( ! node ) {\n\n    module.exports = require('./logw');\n}\n\n\n// logic from https://github.com/gavinengel/magic-globals/blob/master/index.js\n// node && (function () {\n// }());\n\n/** returns line number when placing this in your code: __line */\n// Object.defineProperty(global, '__line', {\n//     get: function(){\n//         return String(\"     \" + __stack[2].getLineNumber()).slice(-5);\n//     }\n// });\n\n// /** return filename (without directory path or file extension) when placing this in your code: __file */\n// Object.defineProperty(global, '__file', {\n//     get: function(){\n//         return __stack[2].getFileName();\n//     }\n// });\n\nif (node) {\n\n    global.__stack || Object.defineProperty(global, '__stack', {\n        get: function tmp() {\n            var orig = Error.prepareStackTrace;\n            Error.prepareStackTrace = function(_, stack){ return stack; };\n            var err = new Error;\n            Error.captureStackTrace(err, tmp);\n            // Error.captureStackTrace(err, arguments.callee); // without 'use strict'\n            var stack = err.stack;\n            Error.prepareStackTrace = orig;\n            return stack;\n        }\n    });\n\n    global.__line = (function () {\n\n        function rpad(s, n) {\n\n            (typeof n === 'undefined') && (n = 5);\n\n            try {\n\n                if (s && s.length && s.length >= n) {\n\n                    return s;\n                }\n            }\n            catch (e) {\n                console.log('exception', typeof s, s, e);\n            }\n\n            return String(s + \" \".repeat(n)).slice(0, n);\n        }\n\n        var tool = function (n) {\n\n            if (typeof n === 'undefined') {\n\n                let tmp = [];\n\n                for (let i in __stack) {\n\n                    if (__stack.hasOwnProperty(i)) {\n\n                        tmp.push('stack: ' + rpad(i) + ' file:' + __stack[i].getFileName() + ':' + rpad(__stack[i].getLineNumber()) + ' ');\n                    }\n                }\n\n                return tmp;\n            }\n\n            (typeof n === 'undefined') && (n = 1);\n\n            if ( ! __stack[n] ) {\n\n                return `${n} not in stack: ` + tool(n - 1);\n            }\n\n            const file = __stack[n].getFileName();\n\n            if (file === null) {\n\n                return 'corrected:' + tool(n - 1);\n            }\n\n            return (new Date()).toISOString().substring(0, 19).replace('T', ' ') + ' ' + file + ':' + rpad(__stack[n].getLineNumber());\n        };\n\n        return tool;\n    }());\n}\n\nvar manualMode = false;\n\nvar native = (function () {\n\n    const nat = (function () {\n\n        try {\n            return function () {\n                Array.prototype.slice.call(arguments, 0).forEach(m => {\n                    if (typeof m === 'string') {\n\n                        process.stdout.write(`\\n${m}`)\n\n                        return;\n                    }\n                    m = JSON.stringify(m, null, 4);\n\n                    process.stdout.write(`\\n${m}`);\n                })\n            };\n            // return console.log.bind(console);\n        }\n        catch (e) {\n\n            return function () {};\n        }\n    }());\n\n    let\n        emmit = true,\n        cache = [];\n    ;\n\n    const tool = function () {\n\n        const args = Array.prototype.slice.call(arguments, 0);\n\n        if (emmit) {\n\n            nat.apply(this, args);\n        }\n        else {\n\n            cache = cache.concat(args);\n        }\n    }\n\n    tool.start = function () {\n\n        if (manualMode) {\n\n            return tool;\n        }\n\n        emmit = true;\n\n        tool.flush();\n\n        emmit = false;\n\n        return tool;\n    };\n\n    tool.get = function (flush) {\n\n        (flush === undefined) && (flush = false);\n\n        manualMode = false;\n\n        var data = cache.join(\"\\n\");\n\n        if ( ! flush ) {\n\n            cache = [];\n        }\n\n        tool.flush();\n\n        return data;\n    };\n\n    tool.flush = function () {\n\n        if (manualMode) {\n\n            return tool;\n        }\n\n        emmit = true;\n\n        if (emmit && cache.length) {\n\n            tool.call(this, cache.join(\"\\n\"));\n        }\n\n        cache = [];\n\n        return tool;\n    };\n\n    return tool;\n}());\n\nvar stack = false;\n\nfunction log() {\n\n    var s = (stack === false) ? 0 : stack;\n\n    native(__line(s + 2));\n\n    if (this !== true) {\n\n        s += 1;\n    }\n\n    stack = false;\n\n    native.apply(this, Array.prototype.slice.call(arguments, 0));\n\n    return function () {\n\n        return log.stack(s).apply(true, Array.prototype.slice.call(arguments, 0));\n    };\n};\n\nlog.native = native;\n\nlog.log = function () {\n    return log.apply(this, Array.prototype.slice.call(arguments, 0));\n};\n\nlog.start = function () {\n\n    native.start();\n\n    manualMode = true;\n\n    return function () {\n\n        return log.stack(s).apply(true, Array.prototype.slice.call(arguments, 0));\n    };\n}\n\nlog.get = function (flush) {\n    return native.get(flush);\n}\n\nlog.json = function () {\n\n    var s = (stack === false) ? 0 : stack;\n\n    native(__line(s + 2));\n\n    if (this !== true) {\n\n        s += 1;\n    }\n\n    stack = false;\n\n    native.start();\n\n    Array.prototype.slice.call(arguments).forEach(function (a) {\n        return (JSON.stringify(a, null, 4) + '').split(/\\n/g).forEach(function (l) {\n            native(l);\n        });\n    });\n\n    native(\"\");\n\n    native.flush();\n\n    return function () {\n\n        return log.stack(s).json.apply(true, Array.prototype.slice.call(arguments, 0));\n    };\n};\n\nlog.stack = function (n /* def: 0 */) {\n\n    if (n === false) {\n\n        stack = n;\n\n        return log;\n    }\n\n    var nn = parseInt(n, 10);\n\n    if (!Number.isInteger(n) || n < 0) {\n\n        throw \"Can't setup stack to '\" + nn + \"' (\"+n+\")\";\n    }\n\n    stack = nn;\n\n    return log;\n};\n\nlog.i = require('./logi');\n\nlog.t = require('./logt');\n\n(function (ll) {\n\n    // http://stackoverflow.com/a/16608045/5560682\n    function isObject(a) {\n        // return (!!a) && (a.constructor === Object);\n        return Object.prototype.toString.call(a) === '[object Object]'; // better in node.js to dealing with RowDataPacket object\n    };\n    function isArray(obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    var type = (function (t) {\n        return function (n) {\n\n            if (n === undefined) {\n\n                return 'Undefined';\n            }\n\n            if (n === null) {\n\n                return 'Null';\n            }\n\n            t = typeof n;\n\n            if (t === 'Function') {\n\n                return t;\n            }\n\n            if (Number.isNaN(n)) {\n\n                return \"NaN\";\n            }\n\n            if (t === 'number') {\n\n                return (Number(n) === n && n % 1 === 0) ? 'Integer' : 'Float';\n            }\n\n            return n.constructor ? n.constructor.name : t;\n            // t = Object.prototype.toString.call(n);\n            // if (t.indexOf('[object ') === 0) {\n            //     t = t.substring(8);\n            //     t = t.substring(0, t.length - 1);\n            // }\n            // return t;\n        };\n    }());\n\n    function each(obj, fn, context) {\n        var r;\n        if (isArray(obj)) {\n            for (var i = 0, l = obj.length ; i < l ; ++i) {\n                if (fn.call(context, obj[i], i) === false) {\n                    return;\n                }\n            }\n        }\n        else if (isObject(obj) || count(obj)) {\n            for (var i in obj) {\n                if (obj && obj.hasOwnProperty && obj.hasOwnProperty(i)) {\n                    if (fn.call(context, obj[i], i) === false) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    function toString(o, k) {\n\n        if (typeof o === 'function') {\n\n            k = Object.keys(o).join(',');\n\n            return k ? 'object keys:' + k : '';\n        }\n\n        return o\n    }\n\n    // only for function\n    function count (o) {\n\n        if (typeof o === 'function') {\n\n            for (let i in o) {\n\n                if (o && o.hasOwnProperty && o.hasOwnProperty(i)) {\n\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    log.dump = function () {\n\n        native.start();\n\n        var args = Array.prototype.slice.call(arguments, 0);\n\n        var limit = args[args.length - 1];\n\n        if (args.length > 1 && Number.isInteger(limit) && limit > 0) {\n\n            args.pop();\n\n            limit -= 1;\n        }\n        else {\n\n            limit = 1;\n        }\n\n        function inner(d, l, index) {\n            (typeof l === 'undefined') && (l = 0);\n            index = (typeof index === 'undefined') ? '' : '<' + index + '> ';\n            var isOb = isObject(d) || count(d);\n            if (isOb || isArray(d)) {\n                ll(('  '.repeat(l)) + index + type(d) + ' ' + ((isOb) ? '{' :'[') );\n                each(d, function (v, i) {\n                    var isOb = isObject(v) || count(v) || isArray(v);\n                    if (limit !== false && l >= limit && isOb) {\n                        ll(\n                            ('  '.repeat(l + 1)) +\n                            ((typeof i === 'undefined') ? '' : '<' + i + '> ') +\n                            '[' + type(v) + ']: ' +\n                            '>>more<<'\n                        );\n                        // inner('... more: ' + type(v), l + 1, i);\n                    }\n                    else {\n                        inner(v, l + 1, i);\n                    }\n                });\n                ll(('  '.repeat(l)) + ((isOb) ? '}' :']') );\n            }\n            else {\n                var t = type(d);\n                var c = toString(d);\n                ll(\n                    ('  '.repeat(l)) +\n                    index +\n                    '[' + t + ']: ' +\n                    '>' + c + '<' +\n                    ( (t === 'String') ? ' len: ' + c.length : '')\n                );\n            }\n        }\n\n        var s = (stack === false) ? 0 : stack;\n\n        native(__line(s + 2));\n\n        if (this !== true) {\n            s += 1;\n        }\n\n        stack = false;\n\n        args.forEach(function (d) {\n            inner(d);\n        });\n\n        native(\"\");\n\n        native.flush();\n\n        return function () {\n\n            var args = Array.prototype.slice.call(arguments, 0);\n\n            if (limit !== false) {\n\n                args = args.concat(limit + 1);\n            }\n\n            return log.stack(s).dump.apply(true, args);\n        };\n    };\n\n}(native));\n\nif (node) {\n\n    module.exports = log;\n}\n","module.exports = require(\"path\");","module.exports = require(\"react-router\");","/**\n * This file can be loaded from node_modules/roderic\n */\n\n/**\n *\n *\n *\n * https://github.com/krakenjs/jwt-csrf\n *\n *\n *\n *\n */\nimport * as config from 'public.config';\n\nimport env from 'roderic/webpack/dotenv';\n\nenv.webload(require('preprocessor/dotenv.json'), 'web');\n\n// import 'isomorphic-fetch';\nimport 'roderic/libs/ajax-fetch';\n\nexport const delay = config.delay;\n\nimport delayPromise from 'roderic/webpack/delay';\n\nconst modeNode = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nlet jwtToken;\n\nconst isProd = env.isProd();\n\n/**\n * Shortcut to don't engage second api server to fetch data if data are in static files\n * remove that later if read api with data in db will be implemented vvv\n */\n//import { fakeTest, fakeReturn } from './transport-fake';\n//\n//     let fetchDataDirectly = () => {};\n//\n//     if (modeNode) {\n//\n//         const nodePath = eval('require')('path');\n//\n//         const jsonFilesCacheMiddleware = eval('require')(nodePath.resolve(__dirname, 'libs', 'jsonFilesCacheMiddleware'));\n//\n//         let regex = jsonFilesCacheMiddleware.regex;\n//\n//         jsonFilesCacheMiddleware.setup(config.jsonApi);\n//\n//         fetchDataDirectly = path => {\n//\n//             if (modeNode) {\n//\n//                 if (config.jsonApi.inNodeFetchDirectlyFromFiles) {\n//\n//                     if (regex.test(path)) {\n//\n//                         var param = path.match(regex)[1];\n//\n//                         var data = jsonFilesCacheMiddleware.getDataFromJsonFile(param);\n//\n//                         if (data) {\n//\n//                             if (data.content) {\n//\n//                                 // log(`found data by param '${param}' ` + data.status)\n//\n//                                 return JSON.parse(data.content)\n//                             }\n//                             else {\n//                                 // log(`no 'content' field for param '${param}'`, data);\n//                             }\n//                         }\n//                     }\n//                 }\n//                 else {\n//                     log(`path: ${param}, can't fetch directly, inNodeFetchDirectlyFromFiles disabled`);\n//                 }\n//             }\n//         }\n//     }\n// // remove that later if read api with data in db will be implemented ^^^\n\nexport const setJwtToken = token => jwtToken = token;\n\nlet host = false;\n\n/**\n * NODE_DONT_UNDERSTAND_*\n */\nlet ndur = false;\n\nexport const getUrl = (path = '', forceRelative = false) => {\n\n    let sendJWTToken = false;\n\n    if (/^https?:\\/\\//.test(path)) {\n\n        return { path, sendJWTToken };\n    }\n\n    if (host === false) {\n\n        host = '';\n        ndur = '';\n\n        if (modeNode) {\n\n            if ( !env.has('NODE_SSR_PROTOCOL') || !env.has('NODE_SSR_HOST') || !env.has('NODE_SSR_PORT') ) {\n\n                throw `Declare all tree environment variables NODE_SSR_PROTOCOL, NODE_SSR_HOST and NODE_SSR_PORT because something is missing`;\n            }\n\n            host += env('NODE_SSR_PROTOCOL') + '://' + env('NODE_SSR_HOST');\n\n            if (env('NODE_SSR_PORT') != 80) {\n\n                host += ':' + env('NODE_SSR_PORT');\n            }\n\n            if ( env.has('NODE_DONT_UNDERSTAND_RELATIVE_PROTOCOL') || env.has('NODE_DONT_UNDERSTAND_RELATIVE_HOST') || env.has('NODE_DONT_UNDERSTAND_RELATIVE_PORT') ) {\n\n                if ( !env.has('NODE_DONT_UNDERSTAND_RELATIVE_PROTOCOL') || !env.has('NODE_DONT_UNDERSTAND_RELATIVE_HOST') || !env.has('NODE_DONT_UNDERSTAND_RELATIVE_PORT') ) {\n\n                    throw `Declare all tree environment variables NODE_DONT_UNDERSTAND_RELATIVE_PROTOCOL, NODE_DONT_UNDERSTAND_RELATIVE_HOST and NODE_DONT_UNDERSTAND_RELATIVE_PORT if you declared one of them because something is missing`;\n                }\n\n                ndur += env('NODE_DONT_UNDERSTAND_RELATIVE_PROTOCOL') + '://' + env('NODE_DONT_UNDERSTAND_RELATIVE_HOST');\n\n                if (env('NODE_DONT_UNDERSTAND_RELATIVE_PORT') != 80) {\n\n                    ndur += ':' + env('NODE_DONT_UNDERSTAND_RELATIVE_PORT');\n                }\n            }\n        }\n        else {\n\n            if ( env.has('NODE_CORS_PROTOCOL') || env.has('NODE_CORS_HOST') || env.has('NODE_CORS_PORT') ) {\n\n                if ( !env.has('NODE_CORS_PROTOCOL') || !env.has('NODE_CORS_HOST') || !env.has('NODE_CORS_PORT') ) {\n\n                    throw `Declare all tree environment variables NODE_CORS_PROTOCOL, NODE_CORS_HOST and NODE_CORS_PORT if you declared one of them because something is missing`;\n                }\n\n                host += env('NODE_CORS_PROTOCOL') + '://' + env('NODE_CORS_HOST');\n\n                if (env('NODE_CORS_PORT') != 80) {\n\n                    host += ':' + env('NODE_CORS_PORT');\n                }\n            }\n        }\n    }\n\n    let prefix = '';\n\n    if (env.has('NODE_SSR_PREFIX')) {\n\n        prefix = env('NODE_SSR_PREFIX');\n    }\n\n\n    // modeNode && console.log('before: ' + path);\n\n    if (config.php_proxy && config.php_proxy.prefix) {\n\n        const match = path.match(config.php_proxy.prefix);\n\n        if (match) {\n\n            if (modeNode) {\n\n                // if node then cut /endpoint\n                path = match[2];\n\n                if ( isProd ) {\n\n                    path = prefix + path;\n                }\n                else {\n\n                    path = '/app_dev.php' + prefix + path;\n                }\n            }\n            else {\n\n\n                if (match) {\n\n                    if ( ( ! isProd ) && ( ! /^\\/app_dev\\.php(\\/.*)?$/.test(match[2]) ) ) {\n\n                        path = path.replace(config.php_proxy.prefix, `$1/app_dev.php${prefix}$2`)\n                    }\n\n                    if ( isProd ) {\n\n                        path = path.replace(config.php_proxy.prefix, `$1${prefix}$2`)\n                    }\n\n                }\n            }\n        }\n    }\n\n    // if ( ( ! isProd ) && ( ! /^\\/app_dev\\.php(\\/.*)?$/.test(path) ) ) {\n    //\n    //     modeNode && console.log('inside: ');\n    //\n    //     path = '/app_dev.php' + path;\n    // }\n\n    // modeNode && console.log('after: ' + path);\n\n    sendJWTToken = true;\n\n    if (forceRelative) {\n\n        if ( modeNode ) {\n\n            path = ndur + path;\n        }\n\n        log('transport (forceRelative): ' + path);\n\n        return { path, sendJWTToken };\n    }\n\n    path = host + path;\n\n    log('transport: ' + path + \"\\n\");\n\n    return { path, sendJWTToken };\n};\n\nexport const fetchData = (path, _opt, ...rest) => {\n\n    let promise;\n\n    const {\n        node,\n        ...opt\n    } = _opt;\n\n    const { path: _path, sendJWTToken } = getUrl(path, node);\n\n    opt.sendJWTToken = sendJWTToken;\n\n    if ( opt.sendJWTToken ) {\n\n        opt.headers = Object.assign({}, opt.headers, {\n            'X-jwt' : jwtToken\n        });\n    }\n\n    // if (fakeTest(path)) {\n    //\n    //     promise = fakeReturn(path);\n    // }\n    // else {\n\n    const args = [_path, opt, ...rest];\n\n    if (opt && opt.real) {\n\n        if (modeNode) {\n\n            log(`fetchData: can't handle fetch(opt.real) to endpoint '${path}' - it's request in node`); // rare situation - usually pure fetch we gonna need in browser\n\n            promise = server(...args);\n        }\n        else {\n\n            if (window.fetch) {\n\n                opt.credentials = \"same-origin\";\n\n                promise = fetch(...args);\n            }\n            else {\n\n                log(`fetchData: can't handle fetch(opt.real) to endpoint '${path}' - window.fetch doesn't exist`);\n\n                promise = server(...args);\n            }\n        }\n    }\n    else {\n        promise = server(...args);\n    }\n\n    if (typeof opt.always === 'function') {\n\n        promise.then(opt.always, opt.always);\n    }\n\n    promise = promise.then(\n        res => {\n\n            if (res.ok) {\n\n                return res;\n            }\n\n            return new Promise((resolve, reject) => {\n\n                res.json()\n                    .catch(() => null)\n                    .then(json => {\n\n                        // log.dump('json')\n                        // log.dump(json)\n                        // log.dump(res.statusText)\n                        // log.dump('end...');\n\n                        if (env('NODE_ENV') === 'development') {\n\n                            let method = '';\n\n                            try {\n                                if (args[1].method !== 'get') {\n\n                                    method = ' -X ' + args[1].method.toUpperCase();\n                                }\n                            }\n                            catch (e) {\n\n                            }\n\n                            let data = '';\n\n                            try {\n\n                                if (args[1].body) {\n\n                                    data = ` --data '${args[1].body}'`;\n                                }\n                            }\n                            catch (e) {\n\n                            }\n\n                            console.log(`\\ncurl${method} ${args[0]}${data}`);\n                        }\n\n                        return reject({\n                            req: [...args],\n                            res: {\n                                status      : res.status,\n                                statusText  : res.statusText,\n                                json\n                            },\n                        });\n                    })\n                ;\n            });\n        },\n        e => {\n            return Promise.reject({\n                req: [...args],\n                res: {\n                    status: 'no status',\n                    statusText: 'Request failed',\n                    json: null,\n                }\n            })\n        }\n    );\n\n    // }\n\n    return delayPromise(delay || 0)\n        .then(() => promise)\n    ;\n};\n\nexport const ee = (str, times = 2) => {\n\n    if (typeof str !== 'string') {\n\n        throw \"ee(): given value is not string: \" + JSON.stringify(str);\n    }\n\n    while (times !== 0) {\n\n        str = encodeURIComponent(str);\n\n        times -= 1;\n    }\n\n    return str;\n}\n\nexport const dd = (str, times = 2) => {\n\n    if (typeof str !== 'string') {\n\n        throw \"dd(): given value is not string: \" + JSON.stringify(str);\n    }\n\n    while (times !== 0) {\n\n        str = decodeURIComponent(str);\n\n        times -= 1;\n    }\n\n    return str;\n}\n\n\n/**\n * Warning in .catch() always expect format:\n *  {\n        req: [...args],\n        res: {\n            status: 'no status',\n            statusText: 'Request failed'\n        }\n    }\n * @param path\n * @param opt\n * @param rest\n * @returns {*|PromiseLike<T>|Promise<T>}\n */\nexport const fetchJson = (path, opt = {}, ...rest) => {\n\n    // // remove that later if read api with data in db will be implemented vvv\n    //     const data = fetchDataDirectly(path);\n    //\n    //     if (data) {\n    //\n    //         return Promise.resolve(data);\n    //     }\n    // // remove that later if read api with data in db will be implemented ^^^\n\n    opt.headers = {\n        ...opt.headers,\n        Accept: 'application/json',\n        'Content-type' : 'application/json; charset=utf-8'\n    };\n\n    if (opt.body && typeof opt.body !== 'string') {\n\n        try {\n            if ( opt.body instanceof FormData ) {\n                // unfortunately i can't put negative here\n            }\n            else {\n                opt.body = JSON.stringify(opt.body);\n            }\n        }\n        catch (e) {\n            opt.body = JSON.stringify(opt.body);\n        }\n    }\n\n    var promise = fetchData(path, opt, ...rest)\n        .then(res => res.text())\n        .then(text => {\n\n            // decode manually in order to provide better debug informations because standard res.json() sometimes\n            // provide error messages like :\n            // invalid json response body at http://localhost:98/endpoint/app_dev.php/userprovider reason: Unexpected token t in JSON at position 124< len: 134\n            try {\n\n                return JSON.parse(text);\n            }\n            catch (e) {\n\n                return Promise.reject(`fetchJson: json parse error >>>${e}<<<: \\n\\n${text}`);\n            }\n        })\n    ;\n\n    return promise;\n};\n\nif ( ! modeNode ) {\n\n    window.fetchData    = fetchData;\n\n    window.fetchJson    = fetchJson;\n\n    window.dd           = dd;\n\n    window.ee           = ee;\n}\n\n\n\n","module.exports = require(\"md5\");","\n'use strict';\n\n/**\n return Promise.resolve()\n    .then(() => delay(3000, 'ok'))\n\n */\nconst delay = (time, data) =>\n    new Promise(\n        resolve => time ? setTimeout(resolve, time, data) : resolve(data)\n    )\n;\n/**\n return Promise.resolve()\n     .then(\n         () => delay(3000, 'ok')\n         () => delay.reject(3000, 'error')\n     )\n\n */\nconst reject = (time, data) =>\n    new Promise(\n        (resolve, reject) => time ? setTimeout(reject, time, data) : reject(data)\n    )\n;\n\n/**\n * Promise.reject('test')\n *     .then(...then(1000))\n *     .catch(data => console.log(data))\n * ;\n * Promise.resolve('test')\n *     .then(...then(1000))\n *     .then(data => console.log(data))\n * ;\n * @param time\n */\n\nconst then = time => ([\n    data => delay(time, data),\n    data => delay.reject(time, data)\n]);\n\ndelay.reject    = reject;\n\ndelay.then      = then;\n\nmodule.exports = delay;\n","module.exports = require(\"react-router-redux\");","\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport isArray from 'lodash/isArray';\nimport getDisplayName from 'react-display-name';\nimport URI from 'urijs';\n\n// middlewares\nimport { createLogger } from 'redux-logger';\nimport promisify from 'redux-promise';\nimport thunk from 'redux-thunk';\n\n// for getData\nimport { matchPath } from 'react-router';\n\nimport history from 'roderic/libs/history';\n\nimport { then } from 'roderic/webpack/delay';\n\nimport { setJwtToken } from 'transport';\n\nimport { routerMiddleware } from 'react-router-redux';\n\nimport tlog from 'inspc/logt'\n\nimport log from 'inspc';\n\nconst wrapDispatchWithMiddlewares = (store, middlewares) => {\n    middlewares.forEach(middleware => store.dispatch = middleware(store)(store.dispatch))\n};\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nconst triggerMultiple = store => next => action => {\n\n    if (isArray(action.type)) {\n\n        return action.type.forEach(a => next({\n            type: a\n        }));\n    }\n\n    return next(action);\n};\n\nlet resolve;\n\n/**\n * import { getStore } from 'roderic/libs/configureStore';\n * getStore.then(store => log('get colors: ', getSearchListInitColors(store.getState())));\n *\n * @type {Promise<any>}\n *\n * Use only in browser\n */\nexport const getStore = new Promise(res => resolve = res);\n\nconst configureStore = opt => {\n\n    const {\n        preloadedState,\n        reducers,\n        createLoggerConfig = {},\n        composeEnhancersConfig = {}, // https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md#actionsblacklist--actionswhitelist\n    } = opt;\n\n    const middlewares = [triggerMultiple, thunk, promisify];\n\n    // http://extension.remotedev.io/#usage\n    let composeEnhancers = compose;\n\n    if ( ! node ) {\n\n        const ls = (localStorage && localStorage.getItem && localStorage.getItem('debug'));\n\n        log(`localStorage.getItem('debug')`, ls);\n\n        if ( (process && eval('process.env') && process.env.NODE_ENV !== 'production') || ls ) {\n\n            middlewares.push(createLogger(createLoggerConfig));\n\n            composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n                ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(composeEnhancersConfig)\n                : compose;\n        }\n\n        middlewares.push(routerMiddleware(history))\n    }\n\n    let store;\n\n    if (preloadedState) {\n\n        store = createStore(\n            reducers,\n            preloadedState,\n            composeEnhancers(\n                applyMiddleware(...middlewares) // applyMiddleware returns an redux enhancer\n            )\n        );\n    }\n    else {\n\n        store = createStore(\n            reducers,\n            composeEnhancers(\n                applyMiddleware(...middlewares) // applyMiddleware returns an redux enhancer\n            )\n        );\n    }\n\n    resolve(store);\n\n    return store;\n};\n\nexport default configureStore;\n\nconst buildUrls = (routes, prefix = '') => {\n\n    if ( isArray(routes) ) {\n\n        return routes.map(route => {\n\n            const node = {...route};\n\n            node.path = `${prefix}${node.path}`;\n\n            if (node.nested) {\n\n                if ( ! isArray(node.nested) ) {\n\n                    throw `'node.nested' is not array`;\n                }\n\n                node.nested = buildUrls(node.nested, node.path);\n            }\n\n            return node;\n        });\n    }\n\n    throw `buildUrls: routes parameter is mandatory`;\n};\n\nconst extract = (routes, url, rootTrigger = [], root) => {\n\n    let list = [];\n\n    let notRoot = !root;\n\n    const found = routes.find(route => matchPath(url, route));\n\n    if (found) {\n\n        if ( notRoot ) {\n\n            // take out component, nested, trigger\n            const { component, nested, trigger, ...rest} = found;\n\n            root = rest;\n        }\n\n        list.push({...found});\n\n        if (found.nested) {\n\n            if ( ! isArray(found.nested) ) {\n\n                throw `'found.nested' exist but is not array`;\n            }\n\n            list = list.concat(extract(found.nested, url, rootTrigger, root))\n        }\n\n        if (found.trigger) {\n\n            list = list.concat(found.trigger.map(component => ({\n                ...root,\n                component,\n            })));\n        }\n    }\n\n    if (found && notRoot && rootTrigger && rootTrigger.length) {\n\n        list = list.concat(rootTrigger.map(component => ({\n            ...root,\n            component,\n        })));\n    }\n\n    return list;\n};\n\n/**\n * Stop using after implementing real metatags\n */\nexport const cascadeMeta = (routesObj, parentMeta) => {\n\n    if ( isArray(routesObj.nested) ) {\n\n        routesObj.nested.forEach(route => {\n\n            if ( ! route.meta ) {\n\n                route.meta = parentMeta || routesObj.meta;\n            }\n\n            if (route.nested) {\n\n                if ( ! isArray(route.nested) ) {\n\n                    throw `cascadeMeta: 'node.nested' is not array`;\n                }\n\n                cascadeMeta(route, route.meta);\n            }\n        });\n    }\n};\n\nexport const fetchData = opt => {\n\n    const {\n        logFlag = 'front'\n    } = opt;\n\n    let {\n        routes,\n        trigger,\n    } = opt;\n\n    routes = buildUrls(routes);\n\n    return async opt => {\n\n        const {\n            url,\n            store,\n            jwtToken,\n        } = opt;\n\n        jwtToken && setJwtToken(jwtToken);\n\n        const urlParts = url.split('?');\n\n        const getParameters = URI.parseQuery(urlParts[1]);\n\n        const routesList = extract(routes, urlParts[0], trigger);\n\n        let firstRoute = false;\n\n        if (routesList.length) {\n\n            firstRoute = routesList[0];\n        }\n\n        return Promise.all(routesList.map(route => {\n\n            let\n                promise,\n                foundComponent  = !!(route && route.component),\n                componentName   = foundComponent ? getDisplayName(route.component) : '<displayName>',\n                isFetchData     = (foundComponent && typeof route.component.fetchData === 'function')\n            ;\n\n            if ( foundComponent ) {\n\n                if ( isFetchData ) {\n\n                    try {\n\n                        promise = route.component.fetchData(store, matchPath(urlParts[0], route), getParameters).catch(e => {\n                            tlog(`${logFlag}: component: ${componentName}, route: ${url}, generated rejected promise with data`);\n                            log.dump(e)\n                        });\n                    }\n                    catch (e) {\n\n                        const reason = {\n                            message: `${logFlag}: executing fetchData crashed in component: ${componentName}, route: ${url}, reason: `,\n                            exception: e\n                        }\n\n                        tlog(reason.message, reason.exception);\n\n                        return Promise.reject(reason);\n                    }\n                }\n                else {\n\n                    tlog(`${logFlag}: fetchData not found in component: ${componentName}, route: ${url}`);\n                }\n            }\n            else {\n\n                tlog(`${logFlag}: component behind router not found, url: ${url}`);\n            }\n\n            tlog(`${logFlag}: in component: ${componentName}, route: ${url}, promise: `, promise)\n\n            if (isFetchData && ( ! promise || typeof promise.then !== 'function') ) {\n\n                tlog(`${logFlag}: fetchData should return promise in component: ${componentName}, route: ${url}`, ' returned: ', promise);\n            }\n\n            return Promise.resolve(promise);\n        }))\n            .then(() => firstRoute)\n            .then(...then(1)) // to execute logic after all weird setTimeout() delay features\n        ;\n    }\n}\n\n\n\n","module.exports = require(\"prop-types\");","module.exports = require(\"fs\");","module.exports = require(\"lodash/isObject\");","module.exports = require(\"@stopsopa/knex-abstract\");","\nimport React from 'react';\n\n// import SSRRedirect from 'roderic/libs/react/SSRRedirect';\n\n// import PageNotFound from 'roderic/libs/react/PageNotFound';\n\n// import LangMainComponent from './components/LangMainComponent';\n\n// import Footer from './components/parts/Footer';\n\n// import Homepage from './pages/home/HomePageContainer';\n\n// import Other from './pages/other/Other';\n\nimport Ipromise from './pages/ipromise/Ipromise';\n\nconst prefix = '';\n\nconst routes = {\n    nested: [\n        // {\n        //     path: \"/:lang([a-z]{2})\",\n        //     exact: false,\n        //     component: LangMainComponent,\n        //     nested: require('./components/routes').default,\n        // },\n        // // {\n        // //     path: '/', // must be / not empty string\n        // //     exact: true,\n        // //     component: () => <SSRRedirect to={prefix + '/en'} />\n        // // },\n        // {\n        //     path: \"*\",\n        //     exact: false,\n        //     component: PageNotFound\n        // }\n        {\n            path: \"*\",\n            exact: false,\n            component: Ipromise\n        }\n    ],\n    trigger: [\n        // Footer,\n    ],\n    meta: `<title>...</title>`\n};\n\nexport default routes;","\nimport React, { Component } from 'react';\n\nexport default class Ipromise extends Component {\n    render() {\n        return (\n            <div>\n                ...test...\n            </div>\n        );\n    }\n}","module.exports = require(\"serialize-javascript\");","module.exports = require(\"compression\");","module.exports = require(\"body-parser\");","module.exports = require(\"inspc\");","module.exports = require(\"react-router-dom\");","/**\n * @author Szymon Dziaowski\n * @license MIT License (c) copyright 2017-present original author or authors\n * @homepage https://github.com/stopsopa/roderic\n */\n\n'use strict';\n\nconst log = (function () {\n    try {\n        if (console.log) {\n            return function () {\n                try {\n                    console.log.apply(this, Array.prototype.slice.call(arguments));\n                }\n                catch (e) {\n                }\n                return log;\n            }\n        }\n    }\n    catch (e) {\n        return function () {return log};\n    }\n}());\n\nlog.stack = function () {return log};\n\nmodule.exports = log.dump = log.start = log.get = log.json = log.log = log;","module.exports = require(\"html\");","module.exports = require(\"react-display-name\");","module.exports = require(\"urijs\");","module.exports = require(\"redux-logger\");","module.exports = require(\"redux-promise\");","module.exports = require(\"redux-thunk\");","\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\n// import createHistory from 'history/createBrowserHistory'\n// import { createBrowserHistory as createHistory } from \"history\";\n\nimport createHistory from 'history/createBrowserHistory';\n\nlet history;\nif (node) {\n\n    history = {push:()=>{}}\n}\nelse {\n\n    history = createHistory()\n}\n\nexport default history;","module.exports = require(\"history/createBrowserHistory\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"source-map-support\");","module.exports = require(\"lodash/template\");","module.exports = require(\"http-proxy-middleware\");","\nconst fs = require('fs');\n\nconst path = require('path');\n\nconst reg = /([&\\?]_=)\\d{4}-\\d{2}-\\d{2}_\\d{2}-\\d{2}-\\d{2}/g;\n\nfunction now() {\n    return (new Date()).toISOString().substring(0, 19).replace('T', '_').replace(/[^\\d_]/g, '-');\n}\n\nfunction replace(content, opt = {}) {\n\n    if (typeof opt.isProd === 'undefined') {\n\n        throw `htmlcache.js: isProd flag expected`;\n    }\n\n    if (typeof content !== 'string') {\n\n        throw `content is not string`;\n    }\n\n    let time = opt.time;\n\n    if (opt.isProd && ! opt.time ) {\n\n        if ( ! opt.file ) {\n\n            throw `htmlcache.js: if there is no 'time' parameter there should be given 'file' parameter`;\n        }\n\n        const file = opt.file;\n\n        if ( ! fs.existsSync(file)) {\n\n            throw `\\n\\n\\n       Error: Can't find file '${file}' and i should be able to because it's production mode\\n\\n\\n`;\n        }\n\n        time = eval('require')(file);\n\n        log(`found in file '${file}': ${time}`);\n    }\n    else {\n\n        time = time || now();\n\n        time += '_dev';\n    }\n\n    return content.replace(reg, `$1${time}`);\n}\n\nreplace.now = now;\n\nreplace.inFile = function (file, time) {\n\n    if ( ! fs.existsSync(file)) {\n\n        throw `file '${file}' doesn't exist`;\n    }\n\n    try {\n        fs.accessSync(file, fs.constants.R_OK);\n    }\n    catch (e) {\n\n        throw `file '${file}' is not readdable`;\n    }\n\n    try {\n        fs.accessSync(file, fs.constants.W_OK);\n    }\n    catch (e) {\n\n        throw `file '${file}' is not writtable`;\n    }\n\n    const content = replace(fs.readFileSync(file).toString(), {\n        time\n    });\n\n    fs.writeFileSync(file, content);\n\n    return content;\n};\n\n// if (require && module && require.main === module) {\n//\n//     const list = process.argv.slice(2);\n//\n//     if (list.length) {\n//\n//         list.forEach(replace.inFile);\n//     }\n//     else {\n//\n//         const path = require('path');\n//\n//         console.error(`run:\\n    node ${path.basename(__filename)} [path to file]`);\n//\n//         process.exit(1);\n//     }\n//\n// }\n\n\nmodule.exports = replace;","\nimport { Router } from 'express';\n\nimport knex from '@stopsopa/knex-abstract';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.use(async (req, res) => {\n\n        // req.body\n        // {\n        //     \"username\": \"username\",\n        //     \"password\": \"pass\",\n        //     \"role\": \"admin\",\n        //     \"jwt_secret\": \"secret...\"\n        // }\n\n        let user        = false;\n\n        let error       = false;\n\n        const username  = req.body.username;\n\n        const password  = req.body.password;\n\n        const role      = req.body.role;\n\n        if (username) {\n\n            if (role) {\n\n                try {\n\n                    user = await knex().model.users.queryOne(`\nSELECT          u.*, GROUP_CONCAT(rr.name) roles\nFROM            :table: u \nINNER JOIN      user_role ur\n             ON ur.user_id = u.id\nINNER JOIN      roles r\n             ON ur.role_id = r.id\n             \n\nINNER JOIN      user_role urr\n             ON urr.user_id = u.id            \nINNER JOIN      roles rr\n             ON urr.role_id = rr.id\n             \nWHERE           u.email = :username\n            AND r.name = :role\nGROUP BY        u.id\n`, {\n                        username,\n                        role\n                    });\n\n                    if ( user ) {\n\n                        if (user.password !== password) {\n\n                            user = null;\n\n                            error = `Incorrect password (user: '${username}') ...`;\n                        }\n\n                        if ( ! user.enabled ) {\n\n                            user = null;\n\n                            error = `User is not active (user: '${username}') ...`;\n                        }\n                    }\n                    else {\n\n                        error = `user '${username}' not found`;\n                    }\n\n                }\n                catch (e) {\n\n                    log.t('userprovider: query error');\n\n                    log.dump(e, 4);\n\n                    return res.jsonError('Server error');\n                }\n            }\n            else {\n\n                error = 'role not specified';\n            }\n        }\n        else {\n\n            error = `username not specified`;\n        }\n\n        // if (req.body.username == 'admin' && req.body.password == 'pass') {\n        //\n        //     return res.end(JSON.stringify({\n        //         user: {\n        //             \"id\": 1,\n        //             \"firstName\": \"admin\",\n        //             \"lastName\": \"admin\",\n        //             \"email\": req.body.username,\n        //             \"enabled\": true,\n        //             \"roles\": [\"admin\", \"user\"],\n        //             // body: req.body,\n        //         },\n        //         error: false,\n        //     }));\n        // }\n\n        if (user) {\n\n            delete user.password;\n        }\n\n        return res.jsonNoCache({\n            user,\n            error,\n        });\n    });\n\n    return router;\n}\n","module.exports = require(\"lodash/trim\");","module.exports = require(\"react-redux\");","'use strict';\n\n// to remove error: [ReferenceError]: >ReferenceError: regeneratorRuntime is not defined\n// https://babeljs.io/docs/en/babel-polyfill\n// https://github.com/babel/babel/issues/5085#issuecomment-277544677\nimport \"@babel/polyfill\";\n\nrequire('@stopsopa/dotenv-up')(3, true, 'index.server');\n\nimport path from 'path';\n\nimport React from 'react';\n\nimport serialize from 'serialize-javascript';\n\nimport express, { Router } from 'express';\n\nimport md5 from 'md5';\n\nimport jwt from 'jsonwebtoken';\n\nimport compression from 'compression';\n\nimport bodyParser from 'body-parser';\n\nimport configWebpack from '../react/config';\n\nimport configPublic from 'public.config';\n\nimport configServer from 'server.config';\n\nconst jwt_secret_md5 = md5(configServer.jwt.jwt_secret);\n\nimport html from 'html';\n\nimport configureStore, { fetchData, cascadeMeta } from 'roderic/libs/configureStore';\n\nimport 'colors';\n\nimport { renderToString } from 'react-dom/server';\n\nimport sourceMapSupport from \"source-map-support\";\n\nimport template from 'lodash/template';\n\n// import { ServerStyleSheet } from 'styled-components'\n\nimport proxy from 'http-proxy-middleware';\n\nimport replace from 'roderic/webpack/htmlcache';\n\nimport jwtCookie from 'roderic/libs/jwtCookie';\n\nimport { fetchJson, fetchData as fetchDataTransport } from \"transport\";\n\nimport tlog from 'inspc/logt';\n\nconst dotenv = require('roderic/webpack/dotenv');\ndotenv.webload(require('preprocessor/dotenv.json'));\nconst isProd = dotenv.isProd();\n\nif ( ! isProd ) {\n\n    sourceMapSupport.install();\n}\n\nconst host      = configWebpack.server.host;\nconst port      = configWebpack.server.port;\n\nprocess.on('uncaughtException', function (e) {\n    switch (true) {\n        case (e.code === 'EADDRINUSE' && e.errno === 'EADDRINUSE'):\n            process.stdout.write(`\\naddress ${host}:${port} already in use - server killed\\n\\n`.red);\n            break;\n        case (e.code === 'EACCES' && e.errno === 'EACCES'):\n            process.stdout.write(`\\nno access to take ${host}:${port} address - server killed - (use sudo)\\n\\n`.red);\n            break;\n        default:\n            throw e;\n    }\n});\n\nconst app = express();\n\napp.use(require('roderic/libs/express-extend-res'));\n\nconst requestIp = require('request-ip');\n\napp.use(requestIp.mw())\n\nconst server    = require('http').createServer(app);\n\nconst io        = require('socket.io')(server); // io\n\n(function () { // polyfill\n    const polyfills = require('polyfill-service-express')({\n        verbose: true, // https://github.com/fooloomanzoo/polyfill-service-express/blob/master/lib/index.js#L21\n    });\n\n    let list = 'not yet';\n\n    require('polyfill-service').listAllPolyfills().then(tmp => list = tmp); // https://github.com/Financial-Times/polyfill-service#listallpolyfills-method\n\n    app.all('/polyfill.list', (req, res) => res.end(JSON.stringify(list)));\n\n    /**\n     * https://github.com/fooloomanzoo/polyfill-service-express/blob/master/lib/index.js#L21\n     *\n     * to test:\n     * ie11:\n     *  /polyfill.min.js?features=fetch&ua=Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko\n     *  /polyfill.js?features=fetch&ua=Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko\n     */\n    app.get(/^\\/polyfill(\\.\\w+)(\\.\\w+)?/, polyfills); // polyfill.min.js?params...\n\n}());\n\n// (function () {\n//     var auth = require('basic-auth');\n//     app.use((req, res, next) => {\n//         var credentials = auth(req);\n//         if (!credentials || credentials.name !== 'john' || credentials.pass !== 'secret') {\n//             res.statusCode = 401;\n//             res.setHeader('WWW-Authenticate', 'Basic realm=\"example\"')\n//             res.end('Access denied')\n//         } else {\n//             next();\n//         }\n//     });\n// }());\n\napp.all('/infinity', () => {});\n\napp.use(compression({filter: (req, res) => {\n    if (req.headers['x-no-compression']) {\n        // don't compress responses with this request header\n        return false\n    }\n\n    // fallback to standard filter function\n    return compression.filter(req, res)\n}}));\n\napp.use(express.static(configWebpack.web, { // http://expressjs.com/en/resources/middleware/serve-static.html\n    // maxAge: 60 * 60 * 24 * 1000 // in milliseconds\n    maxAge: '356 days', // in milliseconds max-age=30758400\n    setHeaders: (res, path) => {\n\n        if (/\\.bmp$/i.test(path)) { // for some reason by default express.static sets here Content-Type: image/x-ms-bmp\n\n            res.setHeader('Content-type', 'image/bmp')\n        }\n\n        // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control\n        // res.setHeader('Cache-Control', 'public, no-cache, max-age=30758400')\n        // res.setHeader('Cache-Control', 'public, only-if-cached')\n    }\n}));\n\nif (configServer.redirections) {\n\n    app.use(require('roderic/libs/redirectionsMiddleware')(configServer.redirections));\n}\n\n/**\n * Reutrn session time left - calculated on server for better reliability\n * In this case only if we don't use remote api server\n */\nconfigServer.jwt.remote || (function () {\n\n    const jwtExtractPayload = require('roderic/libs/jwtExtractPayload');\n\n    app.all(/^\\/endpoint(\\/app_dev\\.php)?\\/jwttokendiff/, (req, res) => {\n\n        const cookie = jwtCookie(req, res);\n\n        const cookieJWTTwoDotsToken = cookie.get();\n\n        let error = false;\n\n        try {\n\n            const payload = jwtExtractPayload(cookieJWTTwoDotsToken);\n\n            const diff = parseInt(payload.exp - ((new Date()).getTime() / 1000), 10);\n\n            // const diff = 60 * 60 * 24 * 2;\n\n            if (Number.isInteger(diff)) {\n\n                res.setHeader('Content-type', 'application/json; charset=utf-8');\n\n                return res.end(JSON.stringify({\n                    diffInSec: diff\n                }));\n            }\n            else {\n\n                error = `Calculated diff is not a number`;\n            }\n        }\n        catch (e) {\n\n            error = `Can't extract payload from jwt token`;\n        }\n\n        res.status(500);\n        res.end(error || 'Unknown error');\n    });\n}());\n\n(function (c) {\n\n    if (!c) {\n\n        return;\n    }\n\n    const media = require('./front/media.json');\n\n    if (c.prefix && c.schema && c.host && c.port) {\n\n        // tlog('php_proxy mounting', JSON.stringify(Object.assign({}, c, {\n        //     prefix: c.prefix.toString(),\n        //     joinend: [c.schema,'://',c.host,':',c.port].join('')\n        // }), null, 4));\n\n        app.use(\n            c.prefix,\n            proxy(\n                [c.schema,'://',c.host,':',c.port].join(''),\n                {\n                    changeOrigin: true,\n                    pathRewrite: (path) => {\n\n                        const match = path.match(c.prefix);\n\n                        let url = match[2];\n\n                        if (match[1] === '/media') {\n\n                            url = '/media' + (url.split('?')[0]);\n\n                            const parts = url.match(/^.*\\[(.+)\\]\\.([a-z]{3})$/);\n\n                            if ( ! parts ) {\n\n                                throw `Filename should look like this: /media/images/fe/be/example-file[flag].jpg`;\n                            }\n\n                            if ( ! media[parts[1]] ) {\n\n                                throw `Node: Flag '${parts[1]}' is not registered, allowed flags: ` + (Object.keys(media).join(', '));\n                            }\n                        }\n\n                        tlog(\"proxy_pass:\", url);\n\n                        return url;\n                    }\n                }\n            )\n        );\n\n    }\n    else {\n        throw \"configServer schema, prefix, host or port is wrong/missing \" + JSON.stringify(c, null, 4);\n    }\n\n}(configServer.php_proxy && Object.assign(configServer.php_proxy, configPublic.php_proxy)));\n\napp.use(bodyParser.urlencoded({extended: false}));\n\napp.use(bodyParser.json());\n\n/**\n * Telegram middleware\n */\n// (function () {\n//\n//     app.all('/broadcast', require('./front/socketSync')({\n//         io // io\n//     }));\n//\n// }());\n\n// fake api vvv\nconfigPublic.jsonApi && (function () {\n\n    const jsonFilesCacheMiddleware = require('roderic/libs/jsonFilesCacheMiddleware');\n\n    app.post(\n        jsonFilesCacheMiddleware.regex,\n        jsonFilesCacheMiddleware(configPublic.jsonApi)\n    );\n}());\n// fake api ^^^\n\n// JWT auth\nconst twoDotsFormEncodedJWTTokenTransportKey = `Authorization`;\napp.use((req, res, next) => {\n\n    try {\n        if ( // if request from login form\n            req.body[configPublic.jwt.loginHiddenInput.name]\n            === configPublic.jwt.loginHiddenInput.value\n        ) {\n\n            // // don't show 'Unrecognized username or password'\n            res[twoDotsFormEncodedJWTTokenTransportKey] = '';\n\n            // if remote auth mode\n            if (configServer.jwt.remote) {\n\n                if ( ! req.body.username) {\n\n                    throw `field req.body.username not specified in request`;\n                }\n\n                fetchJson(configServer.jwt.remote.userProviderEndpoint, {\n                    method: 'post',\n                    body: {\n                        username    : req.body.username,\n                        password    : req.body.password,\n                        role        : req.body.role,\n                        jwt_secret  : jwt_secret_md5\n                    }\n                })\n                    .then(json => {\n\n                        tlog('found user: ' + JSON.stringify(json.user));\n\n                        if (json.error) {\n\n                            return Promise.reject(json.error);\n                        }\n\n                        if ( ! json.user ) {\n\n                            return Promise.reject(`User not found by username '${req.body.username}'`);\n                        }\n\n                        if ( ! json.user.email ) {\n\n                            return Promise.reject(`User don't seem to have 'email' field`);\n                        }\n\n                        const url  = configServer.jwt.remote.jwtTokenProvider;\n\n                        const data = {\n                            method: 'post',\n                            headers: {\n                                Accept: 'application/json',\n                                'Content-type' : 'application/json; charset=utf-8'\n                            },\n                            body: JSON.stringify({\n                                payload: {\n                                    username: json.user.email,\n                                    roles: json.user.roles\n                                },\n                                jwt_secret  : jwt_secret_md5\n                            })\n                        };\n\n                        const ret = fetchDataTransport(url, data);\n\n                        // log(\"\\nuser\\n\", url);\n                        // log.dump(json);\n                        // log(JSON.stringify(data, null, 4));\n\n                        // ret.then(res => res.text()).then(a => log.dump(a), a => log('false', a));\n\n                        return ret;\n                    })\n                    .then(fetchRes => {\n\n                        const cookie = fetchRes.headers.get('Set-Cookie');\n\n                        cookie && res.set('set-cookie', cookie);\n\n                        const ret = fetchRes.json();\n\n                        // ret.then(a => log.dump(a), () => log('false'));\n\n                        return ret;\n                    })\n                    .then(json => {\n\n                        if (json.jwt) {\n\n                            // experimental\n                            // jwtCookie(req, res).set(json.jwt, false, req.body.browsertime);\n                            // jwtCookie(req, res).set(json.jwt);\n\n                            if (configPublic.jwt.postToGetReloadShortcut) {\n\n                                if ((req.get('accept') || '').toLowerCase().split(',').indexOf('text/html') > -1) {\n\n                                    res.set('Content-Type', 'text/html');\n\n                                    return res.end(`<script>location.href = location.href</script>`);\n                                }\n                            }\n\n                            res[twoDotsFormEncodedJWTTokenTransportKey] = json.jwt;\n\n                            next();\n\n                            return true;\n                        }\n\n                        return Promise.reject(`No JWT token returned from provider ` + (json ? JSON.stringify(json, null, 4) : ''));\n                    })\n                    .catch(data => {\n\n                        if (data.res) { // if response from fetchJson\n\n                            tlog(`JWT auth remote error ( token provider ):`, JSON.stringify(data, null, '    '))\n                        }\n                        else { // error from first level\n\n                            tlog(`JWT auth remote error ( user provider ) : '${data}'`)\n                        }\n\n                        // invalid credentials, in other words: login failed\n                        res[twoDotsFormEncodedJWTTokenTransportKey] = false;\n\n                        return next();\n                    })\n                ;\n            }\n            else {\n\n                const user = configServer.jwt.users.find(user => (\n                    (user.username === req.body.username)\n                    &&\n                    (user.password === req.body.password)\n                ));\n\n                if (user) {\n\n                    tlog('found user (config): ' + JSON.stringify(user));\n\n                    const payload = { // directly for loginSuccessWithJWTStringToken redux action\n                        username: user.username,\n                        roles: user.roles,\n                        // roles and other most important informations about user\n                    };\n\n                    const twoDotsJWTToken = jwt.sign(\n                        payload,\n                        configServer.jwt.jwt_secret,\n                        {\n                            // https://github.com/auth0/node-jsonwebtoken#jwtsignpayload-secretorprivatekey-options-callback\n                            // must be int\n                            expiresIn: parseInt(configServer.jwt.jwt_expire, 10)\n                        }\n                    );\n\n                    jwtCookie(req, res).set(twoDotsJWTToken);\n\n                    if (configPublic.jwt.postToGetReloadShortcut) {\n\n                        if ((req.get('accept') || '').toLowerCase().split(',').indexOf('text/html') > -1) {\n\n                            res.set('Content-Type', 'text/html');\n\n                            return res.end(`<script>location.href = location.href</script>`);\n                        }\n                    }\n\n                    // res.setHeader(twoDotsFormEncodedJWTTokenTransportKey, `Bearer ${token}`);\n\n                    // building __JWT_TOKEN__\n                    // to hydrate loginSuccessWithJWTStringToken redux action\n                    res[twoDotsFormEncodedJWTTokenTransportKey] = twoDotsJWTToken;\n                }\n                else {\n\n                    // invalid credentials, in other words: login failed\n                    res[twoDotsFormEncodedJWTTokenTransportKey] = false;\n                }\n\n                next();\n            }\n\n        }\n        else {\n\n            next();\n        }\n    }\n    catch (e) {\n\n        tlog('JWT login catch error', e);\n\n        next();\n    }\n\n    // res.set('X-test', 'testvaluse');\n    //\n    // console.log('baseUrl', req.baseUrl);\n    // console.log('url', req.url);\n    // console.log('originalUrl', req.originalUrl);\n}); // JWT auth\n\n/**\n * Method to test if request has valid JWT token\n */\nfunction secured(req, res) {\n\n    // Usage:\n    //\n    // const twoDotsJWTToken = secured(req, res);\n    //\n    // if (typeof twoDotsJWTToken === 'string') {\n    //\n    //     store.dispatch(loginSuccessWithJWTStringToken(twoDotsJWTToken));\n    //     // log('dispatch(login) is not triggered (postToGetReloadShortcut disabled mode)')\n    // }\n    // else {\n    //\n    //     res.status(401);\n    //\n    //     return res.end(\"Unauthorized request\");\n    // }\n\n    // if postToGetReloadShortcut is disabled then handle auth in one request\n    if (res[twoDotsFormEncodedJWTTokenTransportKey] !== undefined) {\n\n        // token provided from previous middleware is always valid - take without checking\n        return res[twoDotsFormEncodedJWTTokenTransportKey];\n    }\n\n    // fetch normally from cookie (if valid)\n\n    const cookie = jwtCookie(req, res);\n\n    const cookieJWTTwoDotsToken = cookie.get();\n\n    if ( ! cookieJWTTwoDotsToken) {\n\n        tlog(\"JWT token not found in cookies\");\n\n        return ''; // unauthorised but don't show error message\n    }\n\n    try {\n\n        // expecting exception from method .verify() if not valid:\n        // https://github.com/auth0/node-jsonwebtoken#jwtverifytoken-secretorpublickey-options-callback\n        jwt.verify(cookieJWTTwoDotsToken, configServer.jwt.jwt_secret);\n\n        // token is valid, prepare to return...\n        return cookieJWTTwoDotsToken;\n    }\n    catch (e) { // auth based on cookie failed (any reason)\n\n        cookie.del(); // i don't want to see this token again\n\n        return ''; // unauthorised but don't show error message\n\n        // usually you should do next what is below, but it's up to you:\n        //\n        // res.status(401);\n        //\n        // return res.end(\"Unauthorized request\");\n    }\n};\n\n// JWT auth\n\nconfigServer.controllers && app.use(require('./controllers').default());\n\n(function () {\n\n    const extractRoutesMiddleware = require('roderic/libs/extractRoutesMiddleware');\n\n    app.use('/routes', extractRoutesMiddleware({\n        app,\n        secure: (req, res) => {\n\n            if (req.body.jwt_secret_md5 === jwt_secret_md5) {\n\n                return true;\n            }\n\n            return false;\n        }\n    }));\n}());\n\n\nconfigServer.knex && (function () {\n\n    const knex              = require('@stopsopa/knex-abstract');\n\n    knex.init(configServer.knex);\n}());\n\nif (configServer.checkAcceptHeader) {\n\n    app.use(require('roderic/libs/checkAcceptHeaderMiddleware'));\n}\n\n// admin vvv\n// (function () {\n//\n//     const { default: RootServer } = require('./admin/components/RootServer');\n//\n//     const { default: routes } = require('./admin/routes');\n//\n//     const { loginSuccessWithJWTStringToken } = require('./admin/_redux/actions');\n//\n//     const reducers = require('./admin/_redux/reducers').default;\n//\n//     const htmlLazyLoaderTemplate = require('roderic/libs/fileLazyLoader')(path.resolve(configWebpack.app, 'admin', 'admin.entry.html'), 30, (content, file) => {\n//\n//         let tmp = replace(content, {\n//             file: configWebpack.server.timejs,\n//             isProd,\n//         });\n//\n//         try {\n//             tmp = template(tmp);\n//         }\n//         catch (e) {\n//\n//             throw `binding template '${file}' error, probably syntax error: ` + e.toString();\n//         }\n//\n//         return params => {\n//             try {\n//\n//                 return tmp(params);\n//             }\n//             catch (e) {\n//\n//                 tlog(`parsing template '${file}' error: `, e);\n//             }\n//         }\n//     });\n//\n//     const fetch = fetchData({\n//         routes,\n//         logFlag: 'admin'\n//     });\n//\n//     app.all(/\\/admin([\\/\\?].*)?$/, (req, res) => {\n//\n//         const store = configureStore({\n//             reducers\n//         });\n//\n//         const twoDotsJWTToken = secured(req, res);\n//\n//         if (typeof twoDotsJWTToken === 'string' && twoDotsJWTToken) {\n//\n//             store.dispatch(loginSuccessWithJWTStringToken(twoDotsJWTToken));\n//             // log('ADMIN: dispatch(login) is not triggered (postToGetReloadShortcut disabled mode)')\n//         }\n//\n//         fetch({\n//             url: req.url,\n//             store,\n//             jwtToken: jwtCookie(req, res).get()\n//         }).then(mainRoute => {\n//\n//             try {\n//\n//                 const context = {};\n//\n//                 // const sheet = new ServerStyleSheet();\n//\n//                 // let html = renderToString(sheet.collectStyles(<RootServer\n//                 //     store={store}\n//                 //     location={req.url}\n//                 //     context={context}\n//                 // />));\n//\n//                 let htmlFromReact = renderToString(<RootServer\n//                     store={store}\n//                     location={req.url}\n//                     context={context}\n//                 />);\n//\n//                 if (context.status && context.status != 200) {\n//\n//                     res.status(context.status);\n//                 }\n//\n//                 if (context.status === 301 || context.status === 302) {\n//\n//                     if (context.url) {\n//\n//                         return res.redirect(context.status, context.url);\n//                     }\n//\n//                     tlog('context.url not specified');\n//                 }\n//\n//                 // https://www.styled-components.com/docs/advanced#server-side-rendering\n//                 // const styleTags = sheet.getStyleTags();\n//\n//                 let scriptWithPayload = '';\n//\n//                 if (twoDotsJWTToken !== undefined) {\n//\n//                     // it's gonna show only on response after post valid request to login\n//                     scriptWithPayload = `<script>window.__JWT_TOKEN__ = ${serialize(twoDotsJWTToken)};</script>`;\n//                 }\n//\n//                 // window.__PRELOADED_STATE__ = ${JSON.stringify(store.getState()).replace(/</g, '\\\\\\\\\\u003c')};\n//\n//                 const replace = {\n//                     html: htmlFromReact,\n//                     // styleTags,\n//                     // WARNING: See the following for security issues around embedding JSON in HTML:\n//                     // http://redux.js.org/docs/recipes/ServerRendering.html#security-considerations\n//                     data: `<script>window.__PRELOADED_STATE__ = ${serialize(store.getState(), {space: isProd ? 0 : 2})};window.responsestatuscode = ${context.status || 200};window.responsestatusurl = \"${req.url}\";</script>${scriptWithPayload}`\n//\n//                 };\n//\n//                 let tmp = {\n//                     ...replace,\n//                     ...configPublic.htmlParams\n//                 };\n//\n//                 tmp = htmlLazyLoaderTemplate()(tmp);\n//\n//                 isProd || (tmp = html.prettyPrint(tmp, {indent_size: 4}));\n//\n//                 res.send(tmp);\n//\n//             }\n//             catch (e) {\n//\n//                 return Promise.reject({\n//                     source: 'Admin SSR error try catch: ',\n//                     e\n//                 });\n//             }\n//         }).catch(reason => { // it must stay like this\n//\n//             log.start();\n//\n//             log.dump(reason);\n//\n//             let error = log.get(true).split(\"\\n\");\n//\n//             log.start();\n//\n//             log.dump(reason.stack);\n//\n//             let stack = log.get(true).split(\"\\n\");\n//\n//             // restrict to show full error by ip or other, or just log error\n//             // logging error would be best idea\n//             res\n//                 .status(500)\n//                 .set('Content-type', 'application/json; charset=utf-8')\n//                 .send(JSON.stringify({\n//                     message: 'Admin SSR error: ',\n//                     error,\n//                     stack\n//                 }, null, '    '))\n//             ;\n//         });\n//\n//     });\n// }('admin')); // admin vvv\n\n// front vvv\n(function () {\n\n    const { default: RootServer } = require('./front/components/RootServer');\n\n    const { default: routes } = require('./front/routes');\n\n    // const { loginSuccessWithJWTStringToken } = require('./front/_redux/actions');\n\n    const reducers = require('./front/_redux/reducers').default;\n\n    const htmlLazyLoaderTemplate = require('roderic/libs/fileLazyLoader')(path.resolve(configWebpack.app, '..', 'index.html'), 30, (content, file) => {\n\n        let tmp = replace(content, {\n            file: configWebpack.server.timejs,\n            isProd,\n        });\n\n        try {\n            tmp = template(tmp);\n        }\n        catch (e) {\n\n            throw `binding template '${file}' error, probably syntax error`;\n        }\n\n        return params => {\n            try {\n                return tmp(params);\n            }\n            catch (e) {\n                tlog(`parsing template '${file}' error: `, e);\n            }\n        }\n    });\n\n    cascadeMeta(routes);\n\n    const fetch = fetchData({\n        routes: routes.nested,\n        trigger : routes.trigger\n    });\n\n    app.use((req, res) => {\n\n        // read later: TTFB https://hackernoon.com/whats-new-with-server-side-rendering-in-react-16-9b0d78585d67#ee91\n        // if we want to handle 301 or 404 i you shouldnt use TTFB\n\n        const store = configureStore({\n            reducers\n        });\n\n        const twoDotsJWTToken = secured(req, res);\n\n        if (typeof twoDotsJWTToken === 'string' && twoDotsJWTToken) {\n\n            // store.dispatch(loginSuccessWithJWTStringToken(twoDotsJWTToken));\n            // log('ADMIN: dispatch(login) is not triggered (postToGetReloadShortcut disabled mode)')\n        }\n\n        fetch({\n            url: req.url,\n            store,\n            jwtToken: jwtCookie(req, res).get()\n        })\n            .then(mainRoute => {\n\n                try {\n\n                    const context = {};\n\n                    // const sheet = new ServerStyleSheet();\n\n                    // let html = renderToString(sheet.collectStyles(<RootServer\n                    //     store={store}\n                    //     location={req.url}\n                    //     context={context}\n                    // />));\n\n                    let htmlFromReact = renderToString(<RootServer\n                        store={store}\n                        location={req.url}\n                        context={context}\n                    />);\n\n                    if (context.status && context.status != 200) {\n\n                        res.status(context.status);\n                    }\n\n                    if (context.status === 301 || context.status === 302) {\n\n                        if (context.url) {\n\n                            return res.redirect(context.status, context.url);\n                        }\n\n                        tlog('context.url not specified');\n                    }\n\n                    // https://www.styled-components.com/docs/advanced#server-side-rendering\n                    // const styleTags = sheet.getStyleTags();\n\n                    let scriptWithPayload = '';\n\n                    if (twoDotsJWTToken !== undefined) {\n\n                        // it's gonna show only on response after post valid request to login\n                        scriptWithPayload = `<script>window.__JWT_TOKEN__ = ${serialize(twoDotsJWTToken)};</script>`;\n                    }\n\n                    // window.__PRELOADED_STATE__ = ${JSON.stringify(store.getState()).replace(/</g, '\\\\\\\\\\u003c')};\n\n                    const replace = {\n                        html: htmlFromReact,\n                        // styleTags,\n                        // WARNING: See the following for security issues around embedding JSON in HTML:\n                        // http://redux.js.org/docs/recipes/ServerRendering.html#security-considerations\n                        data: `<script>window.__PRELOADED_STATE__ = ${serialize(store.getState(), {space: isProd ? 0 : 2})};window.responsestatuscode = ${context.status || 200};window.responsestatusurl = \"${req.url}\";</script>${scriptWithPayload}`,\n                        meta: mainRoute.meta\n                    };\n\n                    let tmp = {\n                        ...replace,\n                        ...configPublic.htmlParams\n                    };\n\n                    tmp = htmlLazyLoaderTemplate()(tmp);\n\n                    isProd || (tmp = html.prettyPrint(tmp, {indent_size: 4}));\n\n                    res.send(tmp);\n                }\n                catch (e) {\n\n                    return Promise.reject({\n                        source: 'SSR error try catch: ',\n                        e\n                    });\n                }\n            }).catch(reason => { // it must stay like this\n\n            log.start();\n\n            log.dump(reason);\n\n            let error = log.get(true).split(\"\\n\");\n\n            log.start();\n\n            log.dump(reason.stack);\n\n            let stack = log.get(true).split(\"\\n\");\n\n            stack.shift();\n\n            // restrict to show full error by ip or other, or just log error\n            // logging error would be best idea\n            res\n                .status(500)\n                .set('Content-type', 'application/json; charset=utf-8')\n                .send(JSON.stringify({\n                    message: 'SSR error: ',\n                    error,\n                    stack\n                }, null, '    '))\n            ;\n        });\n    });\n}()); // front ^^^\n\n// app.listen(port, host, () => {\n//\n//     console.log(`\\n   Server is running `.green + ` ${host}:${port} `.bgBlue.yellow + \"\\n\")\n// });\n\n// for sockets\nserver.listen( // ... we have to listen on server\n    port,\n    host,\n    undefined, // io -- this extra parameter\n    () => {\n\n        console.log(`\\n   Server is running `.green + ` ${host}:${port} `.bgBlue.yellow + \"\\n\")\n    }\n);\n\n","\n'use strict';\n\nfunction isObject(x) {\n    return Object.prototype.toString.call(x) === '[object Object]'; // better in node.js to dealing with RowDataPacket object\n}\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nlet colorscache = null;\n\nif (node) {\n\n    global.__stack || Object.defineProperty(global, '__stack', {\n        get: function tmp() {\n            var orig = Error.prepareStackTrace;\n            Error.prepareStackTrace = function(_, stack){ return stack; };\n            var err = new Error;\n            Error.captureStackTrace(err, tmp);\n            // Error.captureStackTrace(err, arguments.callee); // without 'use strict'\n            var stack = err.stack;\n            Error.prepareStackTrace = orig;\n            return stack;\n        }\n    });\n\n    global.__line = (function () {\n\n        function rpad(s, n) {\n\n            (typeof n === 'undefined') && (n = 5);\n\n            try {\n\n                if (s && s.length && s.length >= n) {\n\n                    return s;\n                }\n            }\n            catch (e) {\n                console.log('exception', typeof s, s, e);\n            }\n\n            return String(s + \" \".repeat(n)).slice(0, n);\n        }\n\n        var tool = function (n) {\n\n            if (typeof n === 'undefined') {\n\n                let tmp = [];\n\n                for (let i in __stack) {\n\n                    if (__stack.hasOwnProperty(i)) {\n\n                        tmp.push('stack: ' + rpad(i) + ' file:' + __stack[i].getFileName() + ':' + rpad(__stack[i].getLineNumber()) + ' ');\n                    }\n                }\n\n                return tmp;\n            }\n\n            (typeof n === 'undefined') && (n = 1);\n\n            if ( ! __stack[n] ) {\n\n                return `${n} not in stack: ` + tool(n - 1);\n            }\n\n            const file = __stack[n].getFileName();\n\n            if (file === null) {\n\n                return 'corrected:' + tool(n - 1);\n            }\n\n            return (new Date()).toISOString().substring(0, 19).replace('T', ' ') + ' ' + file + ':' + rpad(__stack[n].getLineNumber());\n        };\n\n        return tool;\n    }());\n\n    const util = eval('require')('util');\n\n    const tool = (obj, depth, colors, stack) => {\n        process.stdout.write(tool.log(obj, depth, colors, stack) + \"\\n\");\n    };\n\n    /**\n     * https://nodejs.org/api/util.html#util_util_inspect_object_options\n     */\n    tool.log = (obj, depth = 2, colors = false, stack = 0) => {\n\n        let opt = {\n            // depth,\n            // colors,\n            // compact: true,\n            // breakLength: 80,\n        };\n\n        if (isObject(depth)) {\n\n            opt = Object.assign({\n                colors: false,\n                compact: false,\n            }, opt);\n        }\n        else {\n\n            opt.depth   = depth;\n\n            opt.colors  = (typeof colorscache === 'boolean') ? colorscache : colors;\n        }\n\n        return __line(stack + 3) + \"\\n\" + util.inspect(obj, opt);\n    };\n\n    tool.colors = c => colorscache = c;\n\n    module.exports = tool;\n}\nelse {\n\n    module.exports = require('./logw');\n}","\nmodule.exports = (function () {\n    try {\n        return (...args) => {\n\n            args = [\n                (new Date()).toISOString().substring(0, 19).replace('T', ' '),\n                ': ',\n                ...args,\n                \"\\n\"\n            ];\n\n            process.stdout.write(args.join(''));\n        }\n    }\n    catch (e) {\n        return () => {};\n    }\n}());","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"@stopsopa/dotenv-up\");","\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\n/**\n * @date 2018-02-01\n *\n * I introduced main transport tool (server) based on old fasion ajax on purpose, that's not mistake.\n * The reason is lack in chrome \"Replay XHR\" feature.\n * But it is though provided through fetch polyfill so it will be easy to revert it back\n * when they finally implement \"Replay XHR\"\n */\nif (node) {\n\n    // log(\"\\n\\n\" + 'try to polyfill node' + \"\\n\\n\");\n\n    eval('require')('isomorphic-fetch');\n\n    global.server = fetch;\n\n    // global.server = (...args) => {\n    //\n    //     log(\"\\n\\n\" + 'node fetch polyfill' + \"\\n\\n\");\n    //\n    //     return fetch(...args)\n    // };\n}\nelse {\n\n    // log(\"\\n\\n\" + 'try to polyfill browser' + \"\\n\\n\");\n\n    (function (old) { // https://github.com/github/fetch/issues/544\n\n        window.fetch = undefined;\n\n        require('whatwg-fetch');\n\n        window.server = fetch;\n\n        window.fetch = old;\n\n        // window.fetch = (...args) => {\n        //\n        //     log('browser fetch polyfill');\n        //\n        //     return old(...args)\n        // };\n\n    }(window.fetch));\n}\n\n\n","module.exports = require(\"whatwg-fetch\");","module.exports = require(\"colors\");","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = require(\"cookies\");","/**\n *\n const app = express();\n\n app.use(require('roderic/libs/express-extend-res'));\n * @param req\n * @param res\n * @param next\n */\nmodule.exports = function (req, res, next) {\n\n    if ( !res.constructor.prototype.extended ) {\n\n        res.constructor.prototype.extended = true;\n\n        res.constructor.prototype.jsonNoCache = function (json) {\n            return this.set({\n                'Cache-Control' : 'no-store, no-cache, must-revalidate',\n                'Pragma'        : 'no-cache',\n                'Content-type'  : 'application/json; charset=utf-8',\n                'Expires'       : new Date().toUTCString(),\n            }).json(json);\n        }\n\n        res.constructor.prototype.jsonError = function (errstring) {\n            return this.status(409).jsonNoCache({\n                error: errstring\n            });\n        }\n\n        res.constructor.prototype.notFound = function (msg) {\n\n            return this.status(400).jsonNoCache({\n                error: msg\n            });\n        }\n\n        res.constructor.prototype.accessDenied = function (msg) {\n\n            return this.status(403).jsonNoCache({\n                error: msg\n            });\n        }\n    }\n\n    next();\n}","module.exports = require(\"request-ip\");","module.exports = require(\"http\");","module.exports = require(\"socket.io\");","module.exports = require(\"polyfill-service-express\");","module.exports = require(\"polyfill-service\");","\nmodule.exports = function (config) {\n\n    if ( ! config ) {\n\n        return log(`redirectionsMiddleware: no config provided`);\n    }\n\n    const {\n        ignorePrefixes,\n        redirections\n    } = config;\n\n    const ignorePrefixesLength = ignorePrefixes.length;\n\n    const redirectionsLength = redirections.length;\n\n    return (req, res, next) => {\n\n        const url = req.url;\n\n        for (let i = 0 ; i < ignorePrefixesLength ; i += 1 ) {\n\n            if (url.indexOf(ignorePrefixes[i]) === 0) {\n\n                // log(\"\\nreq.url:     >> pass >>    \" + req.url + \"\\n\");\n\n                return next();\n            }\n        }\n\n        for (let i = 0 ; i < redirectionsLength ; i += 1 ) {\n\n            if (redirections[i].test.test(url)) {\n\n                const newPath = url.replace(redirections[i].test, redirections[i].buildPath);\n\n                // log('test: ', redirections[i].test, url, newPath);\n\n                log(`Redirect path '${url}' to '${newPath}' 301 status code`);\n\n                return res.redirect(301, newPath);\n            }\n        }\n\n        // log(\"\\nreq.url:     ++ didn't found redirect rule ++    \" + req.url + \"\\n\");\n\n        next();\n    };\n}","\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\nmodule.exports = token => {\n\n    if (typeof token === 'string') {\n\n        // https://stackoverflow.com/a/38552302/5560682\n        try {\n\n            token = token.split('.')[1];\n\n            token = token.replace('-', '+').replace('_', '/');\n\n            if (node) {\n\n                token = Buffer.from(token, 'base64'); // https://stackoverflow.com/a/14573049/5560682\n            }\n            else {\n\n                if (!window || !window.atob) {\n\n                    throw \"window.atob not exist\";\n                }\n\n                token = window.atob(token);\n            }\n\n            return JSON.parse(token);\n        }\n        catch (e) {\n\n            throw 'JWT payload extracting error';\n        }\n    }\n\n    return token;\n};","\nconst path = require('path');\n\nconst fs = require('fs');\n\nfunction trim(s) {\n    return (s || '').replace(/^\\s*(\\S*(\\s+\\S+)*)\\s*$/,'$1');\n}\n\nconst defOpt = {\n    timeout: 10\n};\n\nlet globOpt = {};\n\nconst now = () => parseInt((new Date()).getTime() / 1000, 10);\n\nconst cache = {\n\n};\n\nconst regex = /\\/api\\/json\\/(.+)/;\n\nconst setup = opt => {\n\n    if ( ! opt.dir ) {\n\n        throw `jsonFilesCacheMiddleware: No directory specified`;\n    }\n\n    if ( ! fs.existsSync(opt.dir) ) {\n\n        throw `jsonFilesCacheMiddleware: Directory ${opt.dir} doesn't exist`;\n    }\n\n    globOpt = Object.assign(defOpt, opt);\n};\n\nconst get = param => {\n\n    const\n        n       = now(),\n        keys    = Object.keys(cache)\n    ;\n\n    for ( let t, k, i = 0, l = keys.length ; i < l ; i += 1 ) {\n\n        k = keys[i];\n\n        if (k === param) {\n\n            t = cache[k];\n\n            if ( (n - t.created) <= globOpt.timeout ) {\n\n                return t.content;\n            }\n\n            return null;\n        }\n    }\n\n    return null;\n};\n\nconst set = (path, content) => (cache[path] = {\n    content,\n    created: now()\n});\n\n/**\n * First call setup();\n */\nconst getDataFromJsonFile = param => {\n\n    let content     = null;\n\n    let error       = null;\n\n    let status      = null;\n\n    content = get(param);\n\n    if ( content === null ) {\n\n        let file = path.resolve(globOpt.dir, `${param}.json`);\n\n        content = '';\n\n        if (fs.existsSync(file)) {\n\n            content = fs.readFileSync(file).toString();\n\n            set(param, content);\n\n            status = `jsonFilesCacheMiddleware: cache just refreshed`;\n        }\n        else {\n\n            file = path.resolve(globOpt.dir, `${param}.js`);\n\n            if (fs.existsSync(file)) {\n\n                content = eval('require')(path.resolve(globOpt.dir, `${param}`));\n\n                content = JSON.stringify(content);\n\n                set(param, content);\n\n                status = `jsonFilesCacheMiddleware: cache just refreshed`;\n            }\n            else {\n\n                error = `jsonFilesCacheMiddleware: file: ${file} not found`;\n            }\n        }\n    }\n    else {\n\n        status = `jsonFilesCacheMiddleware: from cache`;\n    }\n\n    return {\n        content,\n        error,\n        status\n    };\n};\n\n/**\n * express middleware\n */\nconst tool = opt => {\n\n    setup(opt);\n\n    return (req, res) => {\n\n        const param     = trim(req.params[0]);\n\n        let tmp = {\n            error: null,\n            status: null,\n            content: null\n        };\n\n        if (param) {\n\n            tmp = getDataFromJsonFile(param);\n        }\n\n        (tmp.error !== null) && (res.set('X-api-error', tmp.error));\n\n        (tmp.status !== null) && (res.set('X-api-status', tmp.status));\n\n        if (tmp.content === null) {\n\n            res\n                .status(404)\n                .end()\n            ;\n        }\n        else {\n\n            res\n                .set('Content-type', 'application/json; charset=utf-8')\n                .send(tmp.content)\n            ;\n        }\n    };\n};\n\n\ntool.regex      = regex;\n\ntool.getDataFromJsonFile    = getDataFromJsonFile;\n\ntool.setup      = setup;\n\nmodule.exports = tool;","/**\n * WARNING: might be fragile\n * Implementation is based on internal structure of particular version of express:\n *  v: 4.16.4\n *  https://github.com/expressjs/express/blob/4.16.4/lib/router/index.js#L53\n *\n *  unfortunately, there is no guarantee that things will stay the same\n *\n * @param node\n */\n\n\nfunction isRouter(handle) {\n    // return 'aaa'\n    return Object.prototype.toString.call(handle.params) === \"[object Object]\"\n        && Object.prototype.toString.call(handle._params) === \"[object Array]\"\n        && Object.prototype.toString.call(handle.stack) === \"[object Array]\"\n        ;\n}\n\nfunction extract(stack) {\n\n    const list = [];\n\n    (stack || []).forEach((s, i) => {\n\n        const t = {}\n\n        if (s.path) {\n\n            t.path = s.path + '';\n        }\n\n        if (s.route && s.route.methods) {\n\n            t.methods = Object.entries(s.route.methods)\n                .filter(([key, value]) => value)\n                .map(([key]) => key)\n                .join(' ')\n            ;\n        }\n\n        if (s.regexp) {\n\n            t.regexp = s.regexp + '';\n        }\n\n        if (\n            typeof s.name === 'string'\n            && ! ([\"<anonymous>\", \"router\", \"bound dispatch\"].indexOf(s.name) > -1)\n        ) {\n\n            t.name = s.name;\n        }\n\n        if (isRouter(s.handle || {}) || i == 13) {\n\n            t.router = extract(s.handle.stack);\n        }\n\n        list.push(t);\n    });\n\n    return list;\n}\n\n/**\n * {\n *     app: object (express app instance)\n *     secure: function\n * }\n * @param opt\n * @returns {Function}\n */\nmodule.exports = opt => {\n\n    if ( Object.prototype.toString.call(opt.app) !== \"[object Function]\" ) {\n\n        throw \"extractRoutesMiddleware error: opt.app is not specified\";\n    }\n\n    return (req, res) => {\n\n        if (typeof opt.secure === 'function') {\n\n            if ( ! opt.secure(req, res)) {\n\n                return res.status(403).json({\n                    error: 'no access',\n                });\n            }\n        }\n\n        const list = extract(opt.app._router.stack);\n\n        res.set({\n            'Cache-Control' : 'no-store, no-cache, must-revalidate',\n            'Pragma'        : 'no-cache',\n            'Content-type'  : 'application/json; charset=utf-8',\n            'Expires'       : new Date().toUTCString(),\n        }).json(list);\n    };\n}","\nlet cache;\n\nmodule.exports = (req, res, next) => {\n\n    // log(req.query); // add get parameter ?_accept\n\n    let force = false;\n\n    try {\n        if (typeof req.query._accept !== 'undefined') {\n            force = true;\n        }\n    }\n    catch (e) {\n\n    }\n\n    cache = req.get('accept') || '';\n\n    if ( ! ( cache.toLowerCase().indexOf('text/html') > -1) && ( ! force ) ) {\n\n        return res.status(400).end(`No 'text/html' in 'accept' header : ${cache}`);\n    }\n\n    next();\n}\n","\nconst fs = require('fs');\n\nmodule.exports = (file, refreshEverySec, postProccess) => {\n\n    refreshEverySec = parseInt(refreshEverySec || 0, 10);\n\n    if (refreshEverySec < 5) {\n\n        throw `refreshEverySec can't be smaller then 5 (sec)`;\n    }\n\n    (typeof postProccess === 'function') || (postProccess = content => content);\n\n    let cache = false;\n\n    return () => {\n\n        const now = parseInt((new Date()).getTime() / 1000, 10);\n\n        if ( ! cache || ( (now - cache.time) > refreshEverySec) ) {\n\n            try {\n\n                fs.accessSync(file, fs.constants.R_OK);\n            }\n            catch (e) {\n\n                throw `file '${file}' is not readdable`;\n            }\n\n            cache = {\n                time: now,\n                content: postProccess(fs.readFileSync(file).toString(), file)\n            }\n        }\n\n        return cache.content;\n    };\n};","import {Router} from 'express';\n\nimport configServer from \"server.config\";\n\nimport configPublic from \"public.config\";\n\nimport md5 from 'md5';\n\nimport isObject from 'lodash/isObject';\n\nimport jwt from 'jsonwebtoken';\n\nimport jwtCookie from 'roderic/libs/jwtCookie';\n\nexport const error = (res, error) => {\n\n    res.statusCode = 403;\n\n    res.end(JSON.stringify({error}))\n};\n\nexport default (...args) => {\n\n    const router    = Router();\n\n    const secret    = configServer.jwt.jwt_secret;\n\n    const expire    = configServer.jwt.jwt_expire;\n\n    let hash        = false;\n\n    router.use((req, res, next) => {\n\n        res.set('Content-Type', 'application/json; charset=utf-8');\n\n        // if (req.body.username == 'admin' && req.body.password == 'pass') {\n        //\n        //     return res.end(JSON.stringify({\n        //         user: {\n        //             \"id\": 1,\n        //             \"firstName\": \"admin\",\n        //             \"lastName\": \"admin\",\n        //             \"email\": req.body.username,\n        //             \"enabled\": true,\n        //             \"roles\": [\"admin\", \"user\"],\n        //         },\n        //         error: false,\n        //     }));\n        // }\n\n        if ( ! hash ) {\n\n            hash = md5(secret);\n        }\n\n        if (req.body.jwt_secret !== hash) {\n\n            return error(res, `node controller handler: jwttokenprovider: no jwt_secret md5 secret found in config`);\n        }\n\n        const payload = req.body.payload;\n\n        if ( ! isObject(payload) ) {\n\n            return error(res, `node controller handler: jwttokenprovider: payload should be an object`);\n        }\n\n        const twoDotsJWTToken = jwt.sign(\n            payload,\n            secret,\n            {\n                // https://github.com/auth0/node-jsonwebtoken#jwtsignpayload-secretorprivatekey-options-callback\n                // must be int\n                expiresIn: parseInt(expire, 10)\n            }\n        );\n\n        jwtCookie(req, res).set(twoDotsJWTToken);\n\n        // return res.end(JSON.stringify({\n        //     test: hash,\n        //     s: req.body.jwt_secret,\n        //     p: req.body.payload,\n        //     i: isObject(payload),\n        //     twoDotsJWTToken,\n        //     c: configPublic.jwt.postToGetReloadShortcut,\n        //     acc: req.get('accept'),\n        //     ind: (req.get('accept') || '').toLowerCase().split(',').indexOf('text/html')\n        // }));\n\n        res.json({\n            'jwt'       : twoDotsJWTToken,\n            'decoded'   : jwt.decode(twoDotsJWTToken),\n        });\n    });\n\n    return router;\n}\n","\nimport { Router } from 'express';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.all('', async (req, res) => res.json({\n        page: req.query,\n    }));\n\n    return router;\n}","\nimport { Router } from 'express';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.all('', async (req, res) => res.json({\n        page: {\n            query: req.query,\n        }\n    }));\n\n    return router;\n}","\nimport { Router } from 'express';\n\nimport userprovider from './userprovider';\n\nimport jwttokenprovider from './jwttokenprovider';\n\nimport admin from './admin';\n\nimport front from '../../front/controllers';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.all('/userprovider', userprovider(...args));\n\n    router.all('/jwttokenprovider', jwttokenprovider(...args));\n    //\n    router.use('/admin', admin(...args));\n\n    router.use('', front(...args));\n\n    router.use((req, res) => {\n\n        // https://expressjs.com/en/guide/routing.html#express-router\n        res.statusCode = 500;\n\n        res.end(`Url '${req.url}' don't match any api router`);\n    });\n\n    return router;\n}","\nimport { Router } from 'express';\n\n// import userprovider from './userprovider';\n//\n// import jwttokenprovider from './jwttokenprovider';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.all('/users', (req, res) => res.end('users'));\n    //\n    // router.all('/jwttokenprovider', jwttokenprovider(...args));\n\n    // router.all(/^(\\/app_dev\\.php)?/, (req, res) => {\n    //     res.end(`.... ${req.url}`)\n    // })\n\n    // router.use((req, res) => {\n    //\n    //     // https://expressjs.com/en/guide/routing.html#express-router\n    //     // res.statusCode = 500;\n    //\n    //     res.end(`**Url '${req.url}' don't match any admin router`);\n    // });\n\n    return router;\n}","\nimport { Router } from 'express';\n\nimport page from './page';\n\nimport main from './main';\n\n// import testKnex from '../../models/mysql/test';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    // router.use(testKnex); // available under: /api/admin\n\n    router.use('/page', page(...args));\n\n    router.use('/main', main(...args));\n\n    return router;\n}","\nimport { Router } from 'express';\n\nimport api from './api';\n\nimport configPublic from \"public.config\";\n\nimport jwttokendiff from \"./api/jwttokendiff\";\n\nimport jwttokenrefresh from \"./api/jwttokenrefresh\";\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.use((req, res, next) => {\n        process.stdout.write(\n            (new Date()).toISOString().substring(0, 19).replace('T', ' ') +\n            \" \" +\n            req.method.toUpperCase().padEnd(4, ' ') +\n            \":\" +\n            req.url +\n            \"\\n\"\n        );\n        next();\n    });\n\n    try {\n        if (typeof configPublic.jwt.remote['jwttoken'+'diff'] === 'string') {\n\n            if (configPublic.jwt.remote['jwttoken'+'diff'][0] === '/') {\n\n                router.all(configPublic.jwt.remote['jwttoken'+'diff'], jwttokendiff(...args));\n            }\n            else {\n\n                throw `configPublic.jwt.remote.jwttoken`+`diff[0] === '/' is not true`\n            }\n        }\n    }\n    catch (e) {}\n\n    try {\n        if (typeof configPublic.jwt.remote['jwttoken'+'refresh'] === 'string') {\n\n            if (configPublic.jwt.remote['jwttoken'+'refresh'][0] === '/') {\n\n                router.all(configPublic.jwt.remote['jwttoken'+'refresh'], jwttokenrefresh(...args));\n            }\n            else {\n\n                throw `configPublic.jwt.remote.jwttoken`+`refresh[0] === '/' is not true`\n            }\n        }\n    }\n    catch (e) {}\n\n    /// to test open: http://forbeslindesay.github.io/express-route-tester/\n\n    // paste in Route >>>:bbb((/app_dev.php)|)/ccc/:ddd/eee<<<  (end flag - off)\n    // and to Path >>>/ccc/ddd/eee<<< or >>>/app_dev.php/ccc/ddd/eee<<<\n\n    // paste also in route >>>:bbb((/app_dev.php)|)<<<  (end flag - off)\n    // and see against Path >>>/ccc<<< or >>>/ccc/ddd/eee<<<\n\n    // Route >>>:bbb((/app_dev.php)|)/s/:key<<<  (end flag - off)\n    // Path >>>/app_dev.php/s/value/eee<<< or >>>/s/value/eee<<<\n\n    // Route >>>:bbb((/app_dev.php)|)/s/:key(*)<<<   (end flag - on)\n    // Path >>>/app_dev.php/s/value/df<<< and >>>/s/value/df<<<\n\n    // the result is this:\n    // router.use(':app_dev((/app_dev.php)|)', (req, res, next, ...rest) => {\n    //     res.end(`finally match: '${req.url}' rest: ` + JSON.stringify(req.params, null, 4).replace('{', ''));\n    // })\n    // create express.Router middleware: https://expressjs.com/en/guide/routing.html#express-router\n\n    router.use('/api', api(...args));\n\n    // return router;\n\n    return (function (r) {\n\n        r.use(':app_dev((/app_dev.php)|)', router);\n\n        return r;\n    }(Router()));\n}\n\n\n// req.body\n// {\n//     \"username\": \"username\",\n//     \"password\": \"pass\",\n//     \"role\": \"admin\",\n//     \"jwt_secret\": \"secret...\"\n// }\n\n\n// https://expressjs.com/en/guide/routing.html#express-router\n// res.statusCode = 500;","\nimport { Router } from 'express';\n\nimport jwtCookie from 'roderic/libs/jwtCookie';\n\nimport trim from 'lodash/trim';\n\nimport jwt from 'jsonwebtoken';\n\nimport { error } from './jwttokenprovider';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    router.use((req, res) => {\n\n        res.set('Content-Type', 'application/json; charset=utf-8');\n\n        let rawJwt         = req.get('x-jwt') || jwtCookie(req, res).get() || false;\n\n        if ( ! trim(rawJwt) ) {\n\n            return error(res, `node controller handler: jwttokenprovider: Couldn't extract jwt token from request`);\n        }\n\n        const token =  jwt.decode(rawJwt);\n\n        if ( ! token ) {\n\n            return error(res, `node controller handler: jwttokenprovider: Couldn't decode jwt token`);\n        }\n\n        return res.end(JSON.stringify({\n            diffInSec : token.exp - parseInt((new Date()).getTime() / 1000, 10),\n        }));\n    });\n\n    return router;\n}\n","\nimport { Router } from 'express';\n\nimport configServer from \"server.config\";\n\nimport jwtCookie from 'roderic/libs/jwtCookie';\n\nimport jwt from 'jsonwebtoken';\n\nexport default (...args) => {\n\n    const router = Router();\n\n    const secret    = configServer.jwt.jwt_secret;\n\n    const expire    = configServer.jwt.jwt_expire;\n\n    router.use((req, res) => {\n\n        res.set('Content-Type', 'application/json; charset=utf-8');\n\n        let cookieJWTTwoDotsToken   = req.get('x-jwt') || jwtCookie(req, res).get() || false;\n\n        try {\n\n            // expecting exception from method .verify() if not valid:\n            // https://github.com/auth0/node-jsonwebtoken#jwtverifytoken-secretorpublickey-options-callback\n            jwt.verify(cookieJWTTwoDotsToken, secret);\n        }\n        catch (e) { // auth based on cookie failed (any reason)\n\n            return res.json({\n                diffInSec: false,\n                error: e + '',\n                jwt: null,\n            });\n        }\n\n        let raw = jwt.decode(cookieJWTTwoDotsToken);\n\n        let { exp, iat, ...payload } = raw; // remove exp & iat\n\n        const newCookieJWTTwoDotsToken = jwt.sign(\n            payload,\n            secret,\n            {\n                // https://github.com/auth0/node-jsonwebtoken#jwtsignpayload-secretorprivatekey-options-callback\n                // must be int\n                expiresIn: parseInt(expire, 10)\n            }\n        );\n\n        jwtCookie(req, res).set(newCookieJWTTwoDotsToken);\n\n        payload = jwt.decode(newCookieJWTTwoDotsToken); // decode to get new exp\n\n        res.json({\n            jwt     : newCookieJWTTwoDotsToken,\n            error   : false,\n            diffInSec: parseInt(payload.exp - ((new Date()).getTime() / 1000), 10),\n        });\n    });\n\n    return router;\n}\n","\nimport {\n    PAGE_REQUEST,\n    PAGE_SUCCESS,\n    PAGE_FAILURE,\n} from '../actions/types';\n\nimport { combineReducers } from 'redux';\n\nconst pageDef = false;\n\nconst page = (state = pageDef, action) => {\n    switch (action.type) {\n        case PAGE_REQUEST:\n            return pageDef;\n        case PAGE_SUCCESS:\n            return action.payload.page;\n        default:\n            return state;\n    }\n};\n\nconst slugDef = false;\n\nconst slug = (state = slugDef, action) => {\n    switch (action.type) {\n        case PAGE_REQUEST:\n            return slugDef;\n        case PAGE_SUCCESS:\n            return action.payload.slug || '/';\n        default:\n            return state;\n    }\n};\n\nexport default combineReducers({\n    page,\n    slug,\n})\n\nexport const getPage = state => state.page;\n\nexport const getSlug = state => state.slug;\n","\n/* types */\n\n/* TREE */\nexport const TREE_TEST_SUCCESS = 'LANGUAGES_LIST_SUCCESS';\nexport const TREE_TEST_FAILURE = 'LANGUAGES_LIST_FAILURE';\nexport const TREE_TEST_REMOVE = 'LANGUAGES_LIST_REMOVE';\n\nexport const PAGE_REQUEST = 'PAGE_REQUEST';\nexport const PAGE_SUCCESS = 'PAGE_SUCCESS';\nexport const PAGE_FAILURE = 'PAGE_FAILURE';\n\nexport const MAIN_REQUEST           = 'MAIN_REQUEST';\nexport const MAIN_SUCCESS           = 'MAIN_SUCCESS';\nexport const MAIN_SUCCESS_APPEND    = 'MAIN_SUCCESS_APPEND';\nexport const MAIN_FAILURE           = 'MAIN_FAILURE';\n\n\n/* types */\n","\nimport {\n    MAIN_REQUEST,\n    MAIN_SUCCESS,\n    MAIN_FAILURE,\n    MAIN_SUCCESS_APPEND\n} from '../actions/types';\n\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case MAIN_REQUEST:\n\n            const copy = {...state};\n\n            delete copy[action.payload];\n\n            return copy;\n\n        case MAIN_SUCCESS:\n            return {\n                ...state,\n                ...{\n                    [action.payload.section] : action.payload.content\n                }\n            };\n\n        case MAIN_SUCCESS_APPEND:\n\n            const tmp = {...state};\n\n            tmp[action.payload.section] = tmp[action.payload.section].concat(action.payload.content);\n\n            return tmp;\n        default:\n            return state;\n    }\n}\n\nexport const getMain = state => state;\n\nexport const getMainSection = (state, section) => {\n\n    if ( ! section ) {\n\n        throw `Parameter 'section' can't be empty`;\n    }\n\n    return state[section];\n}","\nimport { combineReducers } from 'redux';\n\n/* imports */\n\n// import tree, * as fromTree from './tree';\n\nimport page, * as fromPage from './page';\n\nimport main, * as fromMain from './main';\n\nimport { ConnectedRouter, routerReducer, routerMiddleware, push } from 'react-router-redux'\n\nconst node = typeof global !== 'undefined' && Object.prototype.toString.call(global.process) === '[object process]';\n\n/* imports */\n\nconst reducers = {\n    /* combine */\n    page,\n    // tree,\n    main,\n    /* combine */\n};\n\nif ( ! node ) {\n\n    reducers.router = routerReducer;\n}\n\nexport default combineReducers(reducers);\n\n\n/* selectors */\n\nexport const getMain = state =>\n    fromMain.getMain(state.main)\n;\n\nexport const getMainSection = (state, section) =>\n    fromMain.getMainSection(state.main, section)\n;\n\nexport const getPage = state =>\n    fromPage.getPage(state.page)\n;\n\nexport const getSlug = state =>\n    fromPage.getSlug(state.page)\n;\n\n// TREE\n// export const getUsers = state =>\n//     fromTree.getUsers(state.users)\n// ;\n\n\n/* selectors */\n\n\n","\nimport React, { Fragment } from 'react';\n\nimport { Route, Switch, Redirect } from 'react-router-dom';\n\nimport all from '../routes';\n\nconst { nested: routes } = all;\n\n// import Layout from './layout/Layout';\n\nconst Root = ({\n    action\n}) => {\n    return (\n        <>\n            {/*<Layout*/}\n                {/*pathAfterSignOut=\"/\"*/}\n            {/*>*/}\n                <Switch>\n                    {routes.map((route, i) => <Route key={i} {...route} />)}\n                </Switch>\n            {/*</Layout>*/}\n        </>\n    );\n};\n\nexport default Root;\n","\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { StaticRouter as Router, Route } from 'react-router'\nimport PropTypes from 'prop-types';\n\nimport Root from './Root';\n\nconst RootServer = ({\n    store,\n    location,\n    context\n}) => (\n    <Provider store={store}>\n        <Router location={location} context={context}>\n            <Root action={location} />\n        </Router>\n    </Provider>\n);\n\nRootServer.propTypes = {\n    store       : PropTypes.object.isRequired,\n    location    : PropTypes.string.isRequired,\n    context     : PropTypes.object.isRequired\n}\n\nexport default RootServer;"],"sourceRoot":""}